<!DOCTYPE html><html lang="en"><head itemscope=""><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"insights","name":"Insights"}}]},{"@type":"BlogPosting","@id":"https://double.cloud/blog/posts/2023/02/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant/","url":"https://double.cloud/blog/posts/2023/02/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant/","name":"Do data types still matter? How column based compression can make data types irrelevant","headline":"Do data types still matter? How column based compression can make data types irrelevant","abstract":"<p>Written By: Stefan Kaeser, DoubleCloud Solution Architect</p>","description":"<p>Written By: Stefan Kaeser, DoubleCloud Solution Architect</p>","dateCreated":"2023-02-01T00:00:00Z","datePublished":"2023-02-01T00:00:00Z","dateModified":"2023-02-01T00:00:00Z","author":{"@type":"Organization","name":"DoubleCloud","legalName":"DoubleCloud Inc","url":"https://double.cloud/","logo":{"@type":"ImageObject","url":"","width":32,"height":32}},"creator":{"@type":"Organization","name":"DoubleCloud","legalName":"DoubleCloud Inc","url":"https://double.cloud/","logo":{"@type":"ImageObject","url":"","width":32,"height":32}},"publisher":{"@type":"Organization","name":"DoubleCloud","legalName":"DoubleCloud Inc","url":"https://double.cloud/","logo":{"@type":"ImageObject","url":"","width":32,"height":32}},"copyrightHolder":{"@type":"Organization","name":"DoubleCloud","legalName":"DoubleCloud Inc","url":"https://double.cloud/","logo":{"@type":"ImageObject","url":"","width":32,"height":32}},"copyrightYear":2025,"mainEntityOfPage":{"@type":"WebPage","@id":"https://double.cloud/blog/posts/2023/02/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant/"},"inLanguage":{"@type":"Language","name":"English","alternateName":"en"},"keywords":["Insights"],"image":"https://double.cloud/assets/blog/articles/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant-small-cover.png","sharedContent":{"@type":"WebPage","headline":"Do data types still matter? How column based compression can make data types irrelevant","url":"https://double.cloud/blog/posts/2023/02/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant/","author":{"@type":"Organization","name":"DoubleCloud","legalName":"DoubleCloud Inc","url":"https://double.cloud/","logo":{"@type":"ImageObject","url":"","width":32,"height":32}}},"wordCount":"","articleBody":""}]}</script><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Relevance of data types in the age of column-based compression | DoubleCloud</title><meta name="description" content="Explore the impact of column-based compression on data types and how it can redefine their significance."/><link rel="canonical" href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html"/><meta itemProp="name" content="Do data types still matter? How column based compression can make data types irrelevant"/><meta itemProp="description" content="&lt;p&gt;Written By: Stefan Kaeser, DoubleCloud Solution Architect&lt;/p&gt;"/><meta itemProp="image" content="https://double.cloud/assets/blog/articles/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant-sharing.png"/><meta property="og:type" content="website"/><meta property="og:url" content="https://double.cloud/blog/posts/2023/02/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant/"/><meta property="og:title" content="Do data types still matter? How column based compression can make data types irrelevant"/><meta property="og:description" content="&lt;p&gt;Written By: Stefan Kaeser, DoubleCloud Solution Architect&lt;/p&gt;"/><meta property="og:image" content="https://double.cloud/assets/blog/articles/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant-sharing.png"/><meta property="og:locale" content="en"/><meta property="og:site_name" content="DoubleCloud"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Do data types still matter? How column based compression can make data types irrelevant"/><meta name="twitter:description" content="&lt;p&gt;Written By: Stefan Kaeser, DoubleCloud Solution Architect&lt;/p&gt;"/><meta name="twitter:image" content="https://double.cloud/assets/blog/articles/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant-sharing.png"/><meta name="robots" content="follow, index"/><meta property="article:published_time" content="2023-02-01T00:00:00Z"/><meta property="article:author" content=""/><meta property="article:tag" content="Insights"/><meta name="next-head-count" content="24"/><link rel="icon" href="../../../../assets/favicon/favicon.ico" sizes="any"/><link type="image/x-icon" rel="shortcut icon" href="../../../../assets/favicon/favicon.ico"/><link type="image/png" sizes="16x16" rel="icon" href="../../../../assets/favicon/favicon-16x16.png"/><link type="image/png" sizes="32x32" rel="icon" href="../../../../assets/favicon/favicon-32x32.png"/><link type="image/png" sizes="120x120" rel="icon" href="../../../../assets/favicon/favicon-120x120.png"/><link type="image/png" sizes="192x192" rel="icon" href="../../../../assets/favicon/favicon-192x192.png"/><link type="image/png" sizes="76x76" rel="apple-touch-icon" href="https://double.cloud/assets/favicon/favicon-76x76.png"/><link type="image/png" sizes="152x152" rel="apple-touch-icon" href="../../../../assets/favicon/favicon-152x152.png"/><link type="image/png" sizes="180x180" rel="apple-touch-icon" href="../../../../assets/favicon/favicon-180x180.png"/><script id="data-google-tag-manager" nonce="EO5sodTPIlmOhJOfnXA9Iw==" data-nonce="EO5sodTPIlmOhJOfnXA9Iw==">
                // Define dataLayer and the gtag function.
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}

                // Default analytics_storage to 'denied'.
                window.gtag = window.gtag || gtag;

                const hasAnalyticsConsent = window?.localStorage.getItem('hasAnalyticsConsent');
                const consent =  hasAnalyticsConsent === 'true' ? 'granted' : 'denied';

                window.gtag('consent', 'default', {
                    'analytics_storage': consent,
                    'ad_storage': consent,
                    'wait_for_update': hasAnalyticsConsent === 'true' ? 0 : Infinity,
                });

                dataLayer.push({
                    'event': 'default_consent'
                });

                (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                'https://www.googletagmanager.com/gtm.js?id='+i+dl;var n=d.querySelector('[nonce]');
                n&&j.setAttribute('nonce',n.nonce||n.getAttribute('nonce'));f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayer','GTM-5M39N8J');
            </script><script nonce="EO5sodTPIlmOhJOfnXA9Iw==">window.__webpack_nonce__ = "EO5sodTPIlmOhJOfnXA9Iw=="</script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="preconnect" href="https://snap.licdn.com"/><link rel="preconnect" href="https://www.google.com"/><link nonce="EO5sodTPIlmOhJOfnXA9Iw==" rel="preload" href="../../../../_next/static/css/a4c87e381fd61058.css" as="style"/><link nonce="EO5sodTPIlmOhJOfnXA9Iw==" rel="stylesheet" href="../../../../_next/static/css/a4c87e381fd61058.css" data-n-g=""/><link nonce="EO5sodTPIlmOhJOfnXA9Iw==" rel="preload" href="../../../../_next/static/css/2facd84af36bff2e.css" as="style"/><link nonce="EO5sodTPIlmOhJOfnXA9Iw==" rel="stylesheet" href="../../../../_next/static/css/2facd84af36bff2e.css" data-n-p=""/><link nonce="EO5sodTPIlmOhJOfnXA9Iw==" rel="preload" href="../../../../_next/static/css/c413166e8b0da734.css" as="style"/><link nonce="EO5sodTPIlmOhJOfnXA9Iw==" rel="stylesheet" href="../../../../_next/static/css/c413166e8b0da734.css" data-n-p=""/><link nonce="EO5sodTPIlmOhJOfnXA9Iw==" rel="preload" href="../../../../_next/static/css/248e88462928fa2f.css" as="style"/><link nonce="EO5sodTPIlmOhJOfnXA9Iw==" rel="stylesheet" href="../../../../_next/static/css/248e88462928fa2f.css" data-n-p=""/><link nonce="EO5sodTPIlmOhJOfnXA9Iw==" rel="preload" href="../../../../_next/static/css/eb8a627e7f585420.css" as="style"/><link nonce="EO5sodTPIlmOhJOfnXA9Iw==" rel="stylesheet" href="../../../../_next/static/css/eb8a627e7f585420.css" data-n-p=""/><noscript data-n-css="EO5sodTPIlmOhJOfnXA9Iw=="></noscript><script defer="" nonce="EO5sodTPIlmOhJOfnXA9Iw==" nomodule="" src="../../../../_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="../../../../_next/static/chunks/webpack-d326a7489defa990.js" nonce="EO5sodTPIlmOhJOfnXA9Iw==" defer=""></script><script src="../../../../_next/static/chunks/framework-cc7effedd0fd3d95.js" nonce="EO5sodTPIlmOhJOfnXA9Iw==" defer=""></script><script src="../../../../_next/static/chunks/main-ebfff3515213fa2f.js" nonce="EO5sodTPIlmOhJOfnXA9Iw==" defer=""></script><script src="../../../../_next/static/chunks/pages/_app-4cd98c5be1eceb26.js" nonce="EO5sodTPIlmOhJOfnXA9Iw==" defer=""></script><script src="../../../../_next/static/chunks/f69bbb46-eed95df46583a2d8.js" nonce="EO5sodTPIlmOhJOfnXA9Iw==" defer=""></script><script src="../../../../_next/static/chunks/030d571f-c7510aa4f8d650e7.js" nonce="EO5sodTPIlmOhJOfnXA9Iw==" defer=""></script><script src="../../../../_next/static/chunks/193-fdb54e47dd6b7c7b.js" nonce="EO5sodTPIlmOhJOfnXA9Iw==" defer=""></script><script src="../../../../_next/static/chunks/756-04d1c95c632019ed.js" nonce="EO5sodTPIlmOhJOfnXA9Iw==" defer=""></script><script src="../../../../_next/static/chunks/387-27526d5e8e2a9173.js" nonce="EO5sodTPIlmOhJOfnXA9Iw==" defer=""></script><script src="../../../../_next/static/chunks/pages/blog/posts/[...slug]-896d627301783262.js" nonce="EO5sodTPIlmOhJOfnXA9Iw==" defer=""></script><script src="../../../../_next/static/HkxA3M0ES7gp3V0n_0ecw/_buildManifest.js" nonce="EO5sodTPIlmOhJOfnXA9Iw==" defer=""></script><script src="../../../../_next/static/HkxA3M0ES7gp3V0n_0ecw/_ssgManifest.js" nonce="EO5sodTPIlmOhJOfnXA9Iw==" defer=""></script></head><body class="dc-root g-root g-root_theme_dark"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5M39N8J" title="Googletagmanager" height="0" width="0" style="display:none;visibility:hidden" loading="lazy"></iframe></noscript><div id="__next" data-reactroot=""><div class="layout"><a href="https://doublecloud-archive.github.io/blog/posts/2024/10/doublecloud-final-update/"><div class="pc-Grid header-anncouncement"><div class="container-fluid "><div class="row"><div class="col"><div class="yfm yfm_constructor"><p><b>DoubleCloud has wound down operations</b> | This is&nbsp;an&nbsp;archived version of&nbsp;the site. <b>Learn more &rarr; </b></p></div></div></div></div></div></a><div class="layout__content"><div class="g-root g-root_theme_dark pc-page-constructor"><div class="pc-page-constructor__wrapper"><div class="pc-layout"><div class="pc-Grid pc-navigation pc-layout__navigation"><div class="container-fluid "><div class="row"><div class="col"><nav><div class="pc-desktop-navigation__wrapper"><div class="pc-desktop-navigation__left"><div class="link" data-link-type="router"><span class="pc-logo pc-desktop-navigation__logo"><picture><img alt="Logo icon" src="../../../../assets/logo/dc-logo-dark.svg" class="pc-logo__icon"/></picture><span class="pc-logo__text"></span></span></div></div><div class="pc-desktop-navigation__navigation-container"><div class="pc-overflow-scroller__container"><div class="pc-overflow-scroller pc-desktop-navigation__navigation"><div class="pc-overflow-scroller__wrapper" style="left:0"><ul class="pc-desktop-navigation__links"><li class="pc-navigation-item pc-navigation-item_menu-layout_desktop pc-desktop-navigation__item"><button class="dc-dropdown-navigation-item__control"><span class="dc-dropdown-navigation-item__title">Why DoubleCloud</span></button><div style="position:fixed;left:0;top:0" class="g-popup dc-dropdown-navigation-item__dropdown"><div class="g-popup__content dc-dropdown-navigation-item__dropdown-content-wrapper" tabindex="-1"><div class="group-list-content"><div class="row item-list-content"><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Performance" data-link-type="router" href="../../../../performance-boost/index.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Performance</span><span class="navigation-popup-item__description">Get the best performance with the highest ROI</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Security" data-link-type="router" href="../../../../security.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Security</span><span class="navigation-popup-item__description">Keep your data protected and maintain compliance</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="DoubleCloud vs. other solutions" data-link-type="router" href="../../../../comparison/index.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">DoubleCloud vs. other solutions</span><span class="navigation-popup-item__description">Learn how DoubleCloud’s products compare to other solutions</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Customer stories" data-link-type="router" href="../../../../resources/case-studies/index.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Customer stories</span><span class="navigation-popup-item__description">See our solutions in action</span></div></a></div></div><div class="group-list-content__banner"><picture><img alt="" src="../../../../assets/doublecloud/menu-bar/menu-banner-dc-results.png.webp" class="group-list-content__image" style="width:300px;height:300px"/></picture><span class="yfm yfm_constructor"><a href='../../../../performance-boost/index.html' target='_self'>Get more and spend less with DoubleCloud  →</a></span></div></div></div></div></li><li class="pc-navigation-item pc-navigation-item_menu-layout_desktop pc-desktop-navigation__item"><button class="dc-dropdown-navigation-item__control"><span class="dc-dropdown-navigation-item__title">Products</span></button><div style="position:fixed;left:0;top:0" class="g-popup dc-dropdown-navigation-item__dropdown"><div class="g-popup__content dc-dropdown-navigation-item__dropdown-content-wrapper" tabindex="-1"><div class="row item-list-content"><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Managed Service for ClickHouse®" data-link-type="router" href="../../../../services/managed-clickhouse.html"><picture class="navigation-popup-item__icon-container"><img alt="" src="../../../../assets/icons/dc-clickhouse.svg" class="navigation-popup-item__icon"/></picture><div class="navigation-popup-item__container navigation-popup-item__container_with-margin"><span class="navigation-popup-item__title">Managed Service for ClickHouse®</span><span class="navigation-popup-item__description">The fastest, most resource-efficient OLAP database for real-time analytics</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Managed Service for Apache Kafka®" data-link-type="router" href="../../../../services/managed-kafka.html"><picture class="navigation-popup-item__icon-container"><img alt="" src="../../../../assets/icons/dc-kafka.svg" class="navigation-popup-item__icon"/></picture><div class="navigation-popup-item__container navigation-popup-item__container_with-margin"><span class="navigation-popup-item__title">Managed Service for Apache Kafka®</span><span class="navigation-popup-item__description">A leading data streaming technology for large-scale, data-intensive applications</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Managed Service for Apache Airflow®" data-link-type="router" href="../../../../services/managed-airflow/index.html"><picture class="navigation-popup-item__icon-container"><img alt="" src="../../../../assets/icons/dc-airflow.svg" class="navigation-popup-item__icon"/></picture><div class="navigation-popup-item__container navigation-popup-item__container_with-margin"><span class="navigation-popup-item__title">Managed Service for Apache Airflow®</span><span class="navigation-popup-item__description">Open-source tool to orchestrate and monitor workflows</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Data Transfer" data-link-type="router" href="../../../../services/doublecloud-transfer.html"><picture class="navigation-popup-item__icon-container"><img alt="" src="../../../../assets/icons/dc-transfer.svg" class="navigation-popup-item__icon"/></picture><div class="navigation-popup-item__container navigation-popup-item__container_with-margin"><span class="navigation-popup-item__title">Data Transfer</span><span class="navigation-popup-item__description">No-code ELT tool for aggregating, collecting, and migrating data</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Data Visualization" data-link-type="router" href="../../../../services/doublecloud-visualization.html"><picture class="navigation-popup-item__icon-container"><img alt="" src="../../../../assets/icons/dc-data-vis.svg" class="navigation-popup-item__icon"/></picture><div class="navigation-popup-item__container navigation-popup-item__container_with-margin"><span class="navigation-popup-item__title">Data Visualization</span><span class="navigation-popup-item__description">Free tool to create, modify, and share dashboards and charts</span></div></a></div></div></div></div></li><li class="pc-navigation-item pc-navigation-item_menu-layout_desktop pc-desktop-navigation__item"><button class="dc-dropdown-navigation-item__control"><span class="dc-dropdown-navigation-item__title">Solutions</span></button><div style="position:fixed;left:0;top:0" class="g-popup dc-dropdown-navigation-item__dropdown"><div class="g-popup__content dc-dropdown-navigation-item__dropdown-content-wrapper" tabindex="-1"><div class="group-list-content"><div class="row item-list-content"><h4 class="item-list-content__title">By use case</h4><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Customer-facing analytics" data-link-type="router" href="../../../../customer-facing-analytics/index.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Customer-facing analytics</span><span class="navigation-popup-item__description">Provide business insights for your clients or partners</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Real-time analytics" data-link-type="router" href="../../../../solutions/real-time-analytics/index.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Real-time analytics</span><span class="navigation-popup-item__description">Build a data infrastructure to collect, process, and analyze data in real time</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Observability and monitoring" data-link-type="router" href="../../../../solutions/observability-and-monitoring/index.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Observability and monitoring</span><span class="navigation-popup-item__description">Analyze terabytes of your logs, events, and traces with ease</span></div></a></div></div><div class="row item-list-content"><h4 class="item-list-content__title">By industry</h4><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="AdTech and MarTech data analytics" data-link-type="router" href="../../../../solutions/adtech.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">AdTech and MarTech data analytics</span><span class="navigation-popup-item__description">Extract and analyze data from Meta ads, Google ads, LinkedIn ads, and others</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Analytics for mobile and gaming apps" data-link-type="router" href="../../../../solutions/web-mobile-gaming-apps.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Analytics for mobile and gaming apps</span><span class="navigation-popup-item__description">Optimize and scale your mobile and gaming app analytics</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="EdTech data analytics" data-link-type="router" href="../../../../solutions/edtech/index.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">EdTech data analytics</span><span class="navigation-popup-item__description">Improve online learning and identify new sales opportunities</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="FinTech data analytics" data-link-type="router" href="../../../../solutions/fintech-real-time-analytics/index.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">FinTech data analytics</span><span class="navigation-popup-item__description">Manage and process large amounts of financial data efficiently</span></div></a></div></div></div></div></div></li><li class="pc-navigation-item pc-navigation-item_menu-layout_desktop pc-desktop-navigation__item"><button class="dc-dropdown-navigation-item__control dc-dropdown-navigation-item__control_selected"><span class="dc-dropdown-navigation-item__title">Resources</span></button><div style="position:fixed;left:0;top:0" class="g-popup dc-dropdown-navigation-item__dropdown"><div class="g-popup__content dc-dropdown-navigation-item__dropdown-content-wrapper" tabindex="-1"><div class="group-list-content"><div class="row item-list-content"><h4 class="item-list-content__title">Using DoubleCloud</h4><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="DoubleCloud API" href="../../../../docs/en/public-api/index.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">DoubleCloud API</span><span class="navigation-popup-item__description">Read up on API tutorials and instructions</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Terraform" href="../../../../docs/en/developer-resources/terraform/create-resources.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Terraform</span><span class="navigation-popup-item__description">Deploy and manage cloud resources with the infrastructure-as-code approach</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Status updates" data-link-type="router" href="https://status.double.cloud/"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Status updates</span><span class="navigation-popup-item__description">Check the current operational status of our services</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Support" data-link-type="router" href="../../../../support/index.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Support</span><span class="navigation-popup-item__description">Learn more about our support tiers</span></div></a></div></div><div class="row item-list-content"><h4 class="item-list-content__title">Discover</h4><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Webinars" data-link-type="router" href="../../../../webinars/index.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Webinars</span><span class="navigation-popup-item__description">Sign up for the next webinar or watch previous ones</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover navigation-popup-item__content_selected" aria-label="Blog" data-link-type="router" href="../../../index.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Blog</span><span class="navigation-popup-item__description">Get insights from our team and the latest news</span></div></a></div></div><div class="group-list-content__banner"><picture><img alt="" src="../../../../assets/doublecloud/menu-bar/menu-banners-dc-ebook.png.webp" class="group-list-content__image" style="width:300px;height:300px"/></picture><span class="yfm yfm_constructor"><a href='../../../../resources/clickhouse-ebook/index.html' target='_self'>Grab your ebook  →</a></span></div></div></div></div></li><li class="pc-navigation-item pc-navigation-item_menu-layout_desktop pc-desktop-navigation__item"><button class="dc-dropdown-navigation-item__control"><span class="dc-dropdown-navigation-item__title">Company</span></button><div style="position:fixed;left:0;top:0" class="g-popup dc-dropdown-navigation-item__dropdown"><div class="g-popup__content dc-dropdown-navigation-item__dropdown-content-wrapper" tabindex="-1"><div class="row item-list-content"><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="About DoubleCloud" data-link-type="router" href="../../../../company/about-us.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">About DoubleCloud</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Careers" data-link-type="router" href="../../../../company/careers.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Careers</span></div></a></div><div class="col  col-12 navigation-popup-item item-list-content__item"><a class="navigation-popup-item__content navigation-popup-item__content_hover" aria-label="Contact us" data-link-type="router" href="../../../../company/contact-us.html"><div class="navigation-popup-item__container"><span class="navigation-popup-item__title">Contact us</span></div></a></div></div></div></div></li><li class="pc-navigation-item pc-navigation-item_menu-layout_desktop pc-desktop-navigation__item"><a aria-label="Pricing" class="pc-navigation-item__content pc-navigation-item__content_type_link" data-link-type="router" href="../../../../pricing.html"><div class="navigation-item"><span class="navigation-item__text">Pricing</span></div></a></li><li class="pc-navigation-item pc-navigation-item_menu-layout_desktop pc-desktop-navigation__item"><a href="../../../../docs/index.html" aria-label="Documentation" class="pc-navigation-item__content pc-navigation-item__content_type_link" target="_self"><div class="navigation-item"><span class="navigation-item__text">Documentation</span></div></a></li></ul></div></div></div></div><div class="pc-desktop-navigation__right"><button type="button" aria-label="Button label" class="pc-control pc-control_size_l pc-control_theme_primary pc-mobile-menu-button"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" class="g-icon" fill="currentColor" stroke="none" data-qa="icon-test-id" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M1.25 3.25A.75.75 0 0 1 2 2.5h12A.75.75 0 0 1 14 4H2a.75.75 0 0 1-.75-.75Zm0 4.75A.75.75 0 0 1 2 7.25h12a.75.75 0 0 1 0 1.5H2A.75.75 0 0 1 1.25 8ZM2 12a.75.75 0 0 0 0 1.5h12a.75.75 0 0 0 0-1.5H2Z" clip-rule="evenodd"></path></svg></svg></button></div></div><div></div></nav></div></div></div></div><main class="pc-layout__content"><section class="bc-wrapper bc-wrapper_padding-top_xs bc-wrapper_padding-bottom_l"><header class="pc-header-block pc-header-block_media-view_full"><div class="pc-header-block__background pc-header-block__background_media" style="background-color:#000000"><div class="pc-Media pc-header-block__background-media" style="background-color:#000000"><div style="transform:"><div class="pc-storage-background-image pc-media-component-image__item pc-header-block__image" data-qa="background-image"><picture data-qa="background-image-image"><img fetchpriority="high" alt="" src="../../../../assets/blog/articles/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant-cover.png" class="pc-storage-background-image__img"/></picture></div></div></div></div><div class="pc-Grid"><div class="container-fluid pc-header-block__container-fluid"><div class="row pc-header-block__breadcrumbs"><div class="col"><div class="pc-header-breadcrumbs pc-header-breadcrumbs_theme_light" aria-label="You are here:"><div class="pc-header-breadcrumbs__item"><a href="../../../index.html" class="pc-header-breadcrumbs__text">Blog</a></div><div class="pc-header-breadcrumbs__item"><a href="../../../index.html%3Ftags=insights.html" class="pc-header-breadcrumbs__text">Insights</a></div></div></div></div><div class="row"><div class="col col-reset pc-header-block__content-wrapper"><div class="row"><div class="col pc-header-block__content pc-header-block__content_offset_default pc-header-block__content_theme_light pc-header-block__content_vertical-offset_l"><div class="col  col-lg-8 col-md-8 col-sm-12 col-12 pc-header-block__content-inner"><h1 class="pc-header-block__title" id="g-uniq-886913"><span>Do data types still matter? How column based compression can make data types irrelevant</span></h1><div class="pc-header-block__description"><div class="yfm yfm_constructor yfm_constructor_theme_light"><p>Written By: Stefan Kaeser, DoubleCloud Solution Architect</p></div></div><div class="bc-post-info__container bc-post-info__container_theme_light"><div class="bc-post-info__item bc-post-info__item_size_s" data-qa="blog-header-meta-container-date">February 1, 2023</div><div class="bc-post-info__item bc-post-info__item_size_s" data-qa="blog-header-meta-container-reading-time"><span class="bc-post-info__icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" class="g-icon bc-post-info__icon-color" fill="currentColor" stroke="none" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 16.004a8 8 0 1 1 0-16 8 8 0 0 1 0 16Zm0-2a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm3.357-3.736a1 1 0 0 0-.342-1.372L9 7.688V5.004a1 1 0 0 0-2 0v3.25a1 1 0 0 0 .486.857l2.5 1.5a1 1 0 0 0 1.371-.343Z"></path></svg></svg></span>10 mins to read</div><div class="bc-post-info__item"><div class="bc-post-info__icon"><div class="g-popover gc-share-popover bc-post-info__share"><button class="gc-share-popover__container bc-post-info__switcher bc-post-info__switcher_theme_light" aria-expanded="false" aria-controls="g-uniq-886914" aria-describedby="g-uniq-886914"><div class="gc-share-popover__icon-container"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" class="g-icon gc-share-popover__icon bc-post-info__share-icon" fill="currentColor" stroke="none" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.798 3.16a.5.5 0 0 0 .363.842H7V9a1 1 0 0 0 2 0V4.002h1.839a.5.5 0 0 0 .363-.844L8.363.156a.5.5 0 0 0-.726 0l-2.84 3.002.001.001ZM13 7a1 1 0 0 1 2 0v6.5a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 1 13.5V7a1 1 0 0 1 2 0v6h10V7Z"></path></svg></svg></div><div class="gc-share-popover__title">Share</div></button></div></div></div></div></div></div></div></div></div></div></div></header></section><div class="pc-Grid"><div class="container-fluid "><div class="row pc-constructor-row"><div class="col"><div class="col col-reset pc-block-base pc-block-base_reset-paddings pc-block-base_indentTop_0 pc-block-base_indentBottom_0 pc-constructor-block pc-constructor-block_type_blog-layout-block"><section class="bc-wrapper bc-wrapper_padding-top_xs bc-wrapper_padding-bottom_xs"><div class="row bc-layout__row no-gutter"><div class="col  col-12 col-lg-8  order-3 order-lg-1 bc-layout__left-col"><div class="bc-layout__item"><div class="col col-reset pc-block-base pc-block-base_reset-paddings pc-block-base_indentTop_0 pc-block-base_indentBottom_0 pc-constructor-block pc-constructor-block_type_blog-yfm-block"><section class="bc-wrapper bc-wrapper_padding-top_xs bc-wrapper_padding-bottom_l"><div class="yfm yfm_blog yfm_reset_paddings yfm_no-list-reset"><p>I&rsquo;ve been working with databases for over twenty years now and one of&nbsp;the first things I&nbsp;always do&nbsp;when optimizing performance is&nbsp;to&nbsp;take a&nbsp;look at&nbsp;the used data types.</p>
<p>It&nbsp;may not sound like much if&nbsp;a&nbsp;single number takes up&nbsp;1,2,4 or&nbsp;8&nbsp;bytes of&nbsp;storage, but if&nbsp;you want to&nbsp;store billions of&nbsp;numbers, a&nbsp;factor of&nbsp;8&nbsp;will have a&nbsp;big impact on&nbsp;the final space you need&hellip; and therefore have a&nbsp;direct impact on&nbsp;your database cost and also speed of&nbsp;queries.</p>
<p>Lately, I&nbsp;had a&nbsp;short discussion with a&nbsp;potential customer.</p>
<p>They were asking if&nbsp;choosing the smallest data type is&nbsp;still important when working with ClickHouse?</p>
<p>Their reasoning behind this was that ClickHouse, as&nbsp;well as&nbsp;other column based DBMS, compress not rows, but single columns, and therefore the compression algorithm should be&nbsp;able to&nbsp;compress the numbers, no&nbsp;matter if&nbsp;we&nbsp;were choosing the smallest possible type, or&nbsp;just use 64-Bit integer all the time.</p>
<p>I&nbsp;instantly said yes, as&nbsp;even in&nbsp;column based DBMS data is&nbsp;not always compressed, but still&hellip; it&nbsp;stayed in&nbsp;my&nbsp;mind to&nbsp;evaluate in&nbsp;more detail, if&nbsp;data types still matter in&nbsp;a&nbsp;column based context.</p>
<p>To&nbsp;give away the TL;DR: Yes, data types still matter, but not if&nbsp;you&rsquo;re only focusing on&nbsp;disk usage.</p>
<h2 id="what-are-data-types?"><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#what-are-data-types?" class="yfm-anchor" aria-hidden="true"><span class="visually-hidden">What are data types?</span></a>What are data types?</h2>
<p>Before we&nbsp;are going into the details and benchmarking results, I&nbsp;want to&nbsp;give a&nbsp;short recap about what data types are.</p>
<p>Basically data types describe the way to&nbsp;represent data within a&nbsp;DBMS (in&nbsp;our case).</p>
<p>If&nbsp;you want to&nbsp;store for example, the number 57, you have multiple possibilities to&nbsp;store this number in&nbsp;ClickHouse.</p>
<p>You can use some unsigned integer type like UInt8 or&nbsp;UInt64, other possibilities are signed integers like Int16 or&nbsp;Int32.</p>
<p>Maybe not instantly in&nbsp;your focus but also possible would be&nbsp;the String type or&nbsp;to&nbsp;make use of&nbsp;the decimal type.</p>
<p>The main difference between all these types is, how big the numbers can grow and how much space a&nbsp;single number takes up.</p>
<p>UInt8 for example means you can store unsigned integers with a&nbsp;maximum of&nbsp;2⁸ (256). Each number takes up&nbsp;8&nbsp;bits (hence the name UInt8) or&nbsp;1&nbsp;byte of&nbsp;space.</p>
<p>Int32 on&nbsp;the other hand allows you to&nbsp;store signed numbers between -2&sup3;&sup1; and 2&sup3;&sup1;-1, but each number you store takes up&nbsp;32&nbsp;bits or&nbsp;4&nbsp;bytes of&nbsp;space.</p>
<p>So&nbsp;if&nbsp;you want to&nbsp;store our example number 57, when storing that number into a&nbsp;Int32 column you are actually storing the 57&nbsp;in&nbsp;one byte and a&nbsp;lot of&nbsp;additional zeros to&nbsp;fill up&nbsp;the other 3&nbsp;bytes.</p>
<p>If&nbsp;you want to&nbsp;store the number 57&nbsp;in&nbsp;a&nbsp;string column, then the single digits would be&nbsp;converted into their ASCII representation and the total length of&nbsp;the string would be&nbsp;added to&nbsp;the storage, hence we&nbsp;would store the information string of&nbsp;length 2&nbsp;and two bytes representing the digit 5&nbsp;and the digit 7.</p>
<p>This would make up&nbsp;a&nbsp;total of&nbsp;at&nbsp;least 3&nbsp;bytes (assuming the length is&nbsp;stored in&nbsp;one byte) used for storing the number 57&nbsp;in&nbsp;a&nbsp;String field.</p>
<p>So&nbsp;no&nbsp;matter if&nbsp;we&nbsp;add additional zeros to&nbsp;the data or&nbsp;always adding the length of&nbsp;the number to&nbsp;it, when using bigger data types than needed, we&nbsp;are adding redundant data.<br />
This is&nbsp;where compression comes into play.</p>
<h2 id="how-does-compression-help-with-storing-data?"><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#how-does-compression-help-with-storing-data?" class="yfm-anchor" aria-hidden="true"><span class="visually-hidden">How does compression help with storing data?</span></a>How does compression help with storing data?</h2>
<p>As&nbsp;we&rsquo;ve seen above, choosing the right data type can have a&nbsp;big impact on&nbsp;the amount of&nbsp;data we&nbsp;need to&nbsp;store on&nbsp;disk, even for a&nbsp;single number.</p>
<p>But what if&nbsp;we&nbsp;don&rsquo;t want to&nbsp;only store single numbers&hellip; but thousands, or&nbsp;millions or&nbsp;even trillions of&nbsp;numbers?</p>
<p>If&nbsp;we&nbsp;want to&nbsp;store them directly, the impact of&nbsp;the data type is&nbsp;exactly the same as&nbsp;if&nbsp;storing a&nbsp;single number.</p>
<p>If&nbsp;one number takes up&nbsp;3&nbsp;bytes then one million numbers take up&nbsp;3&nbsp;million bytes, and if&nbsp;a&nbsp;single number takes up&nbsp;only 1&nbsp;byte then a&nbsp;million number takes up&nbsp;only 1&nbsp;million bytes.</p>
<p>That&rsquo;s where compression kicks in.</p>
<p>I&nbsp;won&rsquo;t go&nbsp;into details about how compression works, as&nbsp;this could fill several books (which are already written as&nbsp;well for some parts), but I&nbsp;just want to&nbsp;explain some generics.</p>
<p>Compression tries to&nbsp;remove the amount of&nbsp;redundancy of&nbsp;data.</p>
<p>For example if&nbsp;you have a&nbsp;list of&nbsp;numbers: 5,5,5,5,5,5,5,5,8,8,8,9,1 you could write it&nbsp;in&nbsp;a&nbsp;compressed way: 8<em>5,3</em>8,9,1</p>
<p>As&nbsp;we&nbsp;can see in&nbsp;that simple example, the big amount of&nbsp;fives could be&nbsp;compressed quite well. The original list took 13&nbsp;characters (without commas), the new one only 8.</p>
<p>But what about different data types in&nbsp;this regard?</p>
<p>When choosing a&nbsp;non optimal data type, you&rsquo;re basically adding additional space that a&nbsp;single value would take up.</p>
<p>But as&nbsp;seen before, this space is&nbsp;mostly filled with zeros, so&nbsp;if&nbsp;you have millions of&nbsp;values, you&rsquo;re actually adding multiple millions of&nbsp;zeros to&nbsp;your data, which means you are adding a&nbsp;lot of&nbsp;redundant data, and compression would remove redundancy.</p>
<p>To&nbsp;go&nbsp;back to&nbsp;our example, let&rsquo;s say in&nbsp;our list of&nbsp;numbers each number takes up&nbsp;3&nbsp;bytes, then the list would look as&nbsp;follows:</p>
<p>005,005,005,005,005,005,005,005,008,008,008,009,001 which would result in&nbsp;39&nbsp;characters to&nbsp;store.</p>
<p>But the compressed list would look like this: 8<em>005,3</em>008,009,001 or&nbsp;16&nbsp;characters.</p>
<p>So&nbsp;even as&nbsp;the raw data takes up&nbsp;3&nbsp;times more space as&nbsp;we&nbsp;are choosing a&nbsp;different data type, the compressed data only takes up&nbsp;2&nbsp;times more.</p>
<h2 id="dont-explain-basics-to-me-i-want-to-see-real-data"><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#dont-explain-basics-to-me-i-want-to-see-real-data" class="yfm-anchor" aria-hidden="true"><span class="visually-hidden">Don&rsquo;t explain basics to&nbsp;me&nbsp;I&nbsp;want to&nbsp;see real data</span></a>Don&rsquo;t explain basics to&nbsp;me&nbsp;I&nbsp;want to&nbsp;see real data</h2>
<p>As&nbsp;described above, choosing bigger data types than needed mainly adds redundant data to&nbsp;the uncompressed blocks, but when writing data to&nbsp;disk, the redundancy should be&nbsp;eliminated again thanks to&nbsp;compression.</p>
<p>To&nbsp;test this, we&nbsp;use a&nbsp;simple test setup.</p>
<p>We&rsquo;ll store 100&nbsp;million rows, containing values between 0&nbsp;and 100&nbsp;in&nbsp;different data types.</p>
<p>Then I&rsquo;ll look at&nbsp;the amount of&nbsp;space these take up&nbsp;on&nbsp;disk, and later on&nbsp;we&rsquo;ll do&nbsp;some simple queries to&nbsp;see if&nbsp;different data types have an&nbsp;impact on&nbsp;performance.</p>
<h2 id="test-setup"><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#test-setup" class="yfm-anchor" aria-hidden="true"><span class="visually-hidden">Test setup</span></a>Test setup</h2>
<p>First we&nbsp;define our test table choosing clickhouse default compression and a&nbsp;lot of&nbsp;different data types to&nbsp;store the numbers 0&nbsp;&mdash; 100&nbsp;in&nbsp;it:</p>

    <div class="yfm-clipboard">
    <pre><code class="hljs">CREATE TABLE dtypes.data_default (
  id UInt32,
  u8 UInt8,
  u16 UInt16,
  u32 UInt32,
  u64 UInt64,
  u256 UInt256,
  udec3 Decimal(3,0),
  udec30 Decimal(30,0),
  ulstr LowCardinality(String),
  ustr String,

  i8 Int8,
  i16 Int16,
  i32 Int32,
  i64 Int64,
  i256 Int256,

  idec3 Decimal(3,0),
  idec30 Decimal(30,0),
  ilstr LowCardinality(String),
  istr String
) engine=MergeTree
order by id;
</code></pre>

    <svg width="16" height="16" viewBox="0 0 24 24" class="yfm-clipboard-button" data-animation="132">
        <path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path>
        <path stroke="currentColor" fill="transparent" stroke-width="1.5" d="M9.5 13l3 3l5 -5" visibility="hidden">
            <animate id="visibileAnimation-132" attributeName="visibility" from="hidden" to="visible" dur="0.2s" fill="freeze" begin></animate>
            <animate id="hideAnimation-132" attributeName="visibility" from="visible" to="hidden" dur="1s" begin="visibileAnimation-132.end+1" fill="freeze"></animate>
        </path>
    </svg>
    </div>
<p>To&nbsp;check if&nbsp;there is&nbsp;a&nbsp;difference when storing signed values, I&nbsp;also added the same columns again but prefixed with an&nbsp;i.</p>
<p>To&nbsp;get the signed values but keep the data distribution, we&rsquo;ll subtract 50&nbsp;from the unsigned value, resulting in&nbsp;values from -50 to&nbsp;50.</p>
<p>Now we&rsquo;ll fill the table with 100&nbsp;million rows, generating random numbers between 0&nbsp;and 100. We&nbsp;explicitly want to&nbsp;store random values, to&nbsp;make sure our dataset itself compresses quite badly, as&nbsp;we&nbsp;only want to&nbsp;see if&nbsp;the redundancy of&nbsp;the data type will be&nbsp;compressed.</p>

    <div class="yfm-clipboard">
    <pre><code class="hljs">INSERT INTO dtypes.data_default
SELECT number, rand() % 100 AS u, u, u, u, u, u, u, 
  toString(u), toString(u), 
  rand() % 100 - 50 AS i, i, i, i, i, 
  i, i, toString(i), toString(i)
FROM numbers(100000000);
</code></pre>

    <svg width="16" height="16" viewBox="0 0 24 24" class="yfm-clipboard-button" data-animation="142">
        <path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path>
        <path stroke="currentColor" fill="transparent" stroke-width="1.5" d="M9.5 13l3 3l5 -5" visibility="hidden">
            <animate id="visibileAnimation-142" attributeName="visibility" from="hidden" to="visible" dur="0.2s" fill="freeze" begin></animate>
            <animate id="hideAnimation-142" attributeName="visibility" from="visible" to="hidden" dur="1s" begin="visibileAnimation-142.end+1" fill="freeze"></animate>
        </path>
    </svg>
    </div>
<p>I&nbsp;manually ran an&nbsp;OPTIMIZE TABLE data_default FINAL to&nbsp;make sure the data is&nbsp;in&nbsp;as&nbsp;less parts possible, to&nbsp;see the strongest effect of&nbsp;the compression</p>
<h2 id="first-result"><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#first-result" class="yfm-anchor" aria-hidden="true"><span class="visually-hidden">First result</span></a>First result</h2>
<p>So&nbsp;how much space does each data type now take up&nbsp;on&nbsp;disk?</p>
<p>Fortunately, ClickHouse collects a&nbsp;lot of&nbsp;statistics in&nbsp;its system tables, so&nbsp;we&nbsp;can easily get the wanted data by&nbsp;running a&nbsp;simple query:</p>

    <div class="yfm-clipboard">
    <pre><code class="hljs">SELECT name, substring(type, 1, 50) as type, 
  formatReadableSize(data_compressed_bytes) AS comp,
  formatReadableSize(data_uncompressed_bytes) AS uncomp,
  round(data_uncompressed_bytes / data_compressed_bytes, 2) AS 
    ratio
FROM system.columns
WHERE database ='dtypes' AND table = 'data_default'
</code></pre>

    <svg width="16" height="16" viewBox="0 0 24 24" class="yfm-clipboard-button" data-animation="155">
        <path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path>
        <path stroke="currentColor" fill="transparent" stroke-width="1.5" d="M9.5 13l3 3l5 -5" visibility="hidden">
            <animate id="visibileAnimation-155" attributeName="visibility" from="hidden" to="visible" dur="0.2s" fill="freeze" begin></animate>
            <animate id="hideAnimation-155" attributeName="visibility" from="visible" to="hidden" dur="1s" begin="visibileAnimation-155.end+1" fill="freeze"></animate>
        </path>
    </svg>
    </div>
<p>And this is&nbsp;the result:</p>
<table>
<tbody>
<tr>
<td>
<p><strong>name</strong></p>
</td>
<td>
<p><strong>type</strong></p>
</td>
<td>
<p><strong>comp</strong></p>
</td>
<td>
<p><strong>uncomp</strong></p>
</td>
<td>
<p><strong>ratio</strong></p>
</td>
</tr>
<tr>
<td>
<p>id</p>
</td>
<td>
<p>UInt32</p>
</td>
<td>
<p>383.12 MiB</p>
</td>
<td>
<p>381.47 MiB</p>
</td>
<td>
<p>1</p>
</td>
</tr>
<tr>
<td>
<p>u8</p>
</td>
<td>
<p>UInt8</p>
</td>
<td>
<p>95.78 MiB</p>
</td>
<td>
<p>95.37 MiB</p>
</td>
<td>
<p>1</p>
</td>
</tr>
<tr>
<td>
<p>u16</p>
</td>
<td>
<p>UInt16</p>
</td>
<td>
<p>146.84 MiB</p>
</td>
<td>
<p>190.73 MiB</p>
</td>
<td>
<p>1.3</p>
</td>
</tr>
<tr>
<td>
<p>u32</p>
</td>
<td>
<p>UInt32</p>
</td>
<td>
<p>279.67 MiB</p>
</td>
<td>
<p>381.47 MiB</p>
</td>
<td>
<p>1.36</p>
</td>
</tr>
<tr>
<td>
<p>u64</p>
</td>
<td>
<p>UInt64</p>
</td>
<td>
<p>285.15 MiB</p>
</td>
<td>
<p>762.94 MiB</p>
</td>
<td>
<p>2.68</p>
</td>
</tr>
<tr>
<td>
<p>u256</p>
</td>
<td>
<p>UInt256</p>
</td>
<td>
<p>380.01 MiB</p>
</td>
<td>
<p>2.98 GiB</p>
</td>
<td>
<p>8.03</p>
</td>
</tr>
<tr>
<td>
<p>udec3</p>
</td>
<td>
<p>Decimal (3, 0)</p>
</td>
<td>
<p>279.67 MiB</p>
</td>
<td>
<p>381.47 MiB</p>
</td>
<td>
<p>1.36</p>
</td>
</tr>
<tr>
<td>
<p>udec30</p>
</td>
<td>
<p>Decimal (30, 0)</p>
</td>
<td>
<p>286.53 MiB</p>
</td>
<td>
<p>1.49 GiB</p>
</td>
<td>
<p>5.33</p>
</td>
</tr>
<tr>
<td>
<p>ulstr</p>
</td>
<td>
<p>LowCardinality (String)</p>
</td>
<td>
<p>95.89 MiB</p>
</td>
<td>
<p>95.56 MiB</p>
</td>
<td>
<p>1</p>
</td>
</tr>
<tr>
<td>
<p>ustr</p>
</td>
<td>
<p>String</p>
</td>
<td>
<p>182.86 MiB</p>
</td>
<td>
<p>276.57 MiB</p>
</td>
<td>
<p>1.51</p>
</td>
</tr>
<tr>
<td>
<p>i8</p>
</td>
<td>
<p>Int8</p>
</td>
<td>
<p>95.78 MiB</p>
</td>
<td>
<p>95.37 MiB</p>
</td>
<td>
<p>1</p>
</td>
</tr>
<tr>
<td>
<p>i16</p>
</td>
<td>
<p>Int16</p>
</td>
<td>
<p>155.06 MiB</p>
</td>
<td>
<p>190.73 MiB</p>
</td>
<td>
<p>1.23</p>
</td>
</tr>
<tr>
<td>
<p>i32</p>
</td>
<td>
<p>Int32</p>
</td>
<td>
<p>281.05 MiB</p>
</td>
<td>
<p>381.47 MiB</p>
</td>
<td>
<p>1.36</p>
</td>
</tr>
<tr>
<td>
<p>i64</p>
</td>
<td>
<p>Int64</p>
</td>
<td>
<p>284.83 MiB</p>
</td>
<td>
<p>762.94 MiB</p>
</td>
<td>
<p>2.68</p>
</td>
</tr>
<tr>
<td>
<p>i256</p>
</td>
<td>
<p>Int256</p>
</td>
<td>
<p>379.24 MiB</p>
</td>
<td>
<p>2.98 GiB</p>
</td>
<td>
<p>8.05</p>
</td>
</tr>
<tr>
<td>
<p>idec3</p>
</td>
<td>
<p>Decimal (3, 0)</p>
</td>
<td>
<p>281.05 MiB</p>
</td>
<td>
<p>381.47 MiB</p>
</td>
<td>
<p>1.36</p>
</td>
</tr>
<tr>
<td>
<p>idec30</p>
</td>
<td>
<p>Decimal (30, 0)</p>
</td>
<td>
<p>285.77 MiB</p>
</td>
<td>
<p>1.49 GiB</p>
</td>
<td>
<p>5.34</p>
</td>
</tr>
<tr>
<td>
<p>ilstr</p>
</td>
<td>
<p>LowCardinality (String)</p>
</td>
<td>
<p>95.89 MiB</p>
</td>
<td>
<p>95.56 MiB</p>
</td>
<td>
<p>1</p>
</td>
</tr>
<tr>
<td>
<p>istr</p>
</td>
<td>
<p>String</p>
</td>
<td>
<p>189.39 MiB</p>
</td>
<td>
<p>315.67 MiB</p>
</td>
<td>
<p>1.67</p>
</td>
</tr>
</tbody>
</table>
<p>As&nbsp;you can see, the results resemble the basic assumption we&nbsp;had, that the bigger the data type is, the better the compression ratio becomes, or&nbsp;simply speaking, if&nbsp;a&nbsp;bigger data type in&nbsp;theory takes up&nbsp;double the space than a&nbsp;smaller data type, it&nbsp;doesn&rsquo;t mean that after compression the data still takes up&nbsp;double the space on&nbsp;disk.</p>
<p>But we&nbsp;also see that choosing the smallest data type possible (UInt8) takes up&nbsp;95MiB while the biggest one (UInt256) takes 380MiB, so&nbsp;still a&nbsp;factor of&nbsp;4&nbsp;for disk usage, which does still matter a&nbsp;lot.</p>
<h2 id="compression-algorithms-and-codecs"><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#compression-algorithms-and-codecs" class="yfm-anchor" aria-hidden="true"><span class="visually-hidden">Compression algorithms and codecs</span></a>Compression algorithms and codecs</h2>
<p>As&nbsp;disk I/O is&nbsp;the most important factor for speed in&nbsp;ClickHouse and disk space being an&nbsp;important factor for cost as&nbsp;well, we&nbsp;could already finish here and conclude that data types still matter and all would be&nbsp;fine.</p>
<p>But ClickHouse has such a&nbsp;wide variety of&nbsp;possibilities for defining columns, using special compression algorithms and codecs for optimizing the compression ratio.</p>
<p>The default algorithm used is&nbsp;LZ4, which is&nbsp;fast and has a&nbsp;good compression ratio overall. But using zstd can lead to&nbsp;a&nbsp;better compression with only a&nbsp;little more impact on&nbsp;the CPU.</p>
<p>There are also some special codecs which can be&nbsp;applied to&nbsp;make data more compressible like T64.</p>
<p>To&nbsp;change a&nbsp;codec in&nbsp;ClickHouse you just need to&nbsp;change the definition of&nbsp;the column you want to&nbsp;apply a&nbsp;different codec on:</p>

    <div class="yfm-clipboard">
    <pre><code class="hljs">CREATE TABLE dtypes.data_t64_zstd (
id UInt32,
u8 UInt8  CODEC(T64, ZSTD),
u16 UInt16  CODEC(T64, ZSTD),
…
</code></pre>

    <svg width="16" height="16" viewBox="0 0 24 24" class="yfm-clipboard-button" data-animation="727">
        <path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path>
        <path stroke="currentColor" fill="transparent" stroke-width="1.5" d="M9.5 13l3 3l5 -5" visibility="hidden">
            <animate id="visibileAnimation-727" attributeName="visibility" from="hidden" to="visible" dur="0.2s" fill="freeze" begin></animate>
            <animate id="hideAnimation-727" attributeName="visibility" from="visible" to="hidden" dur="1s" begin="visibileAnimation-727.end+1" fill="freeze"></animate>
        </path>
    </svg>
    </div>
<h2 id="the-t64-codec"><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#the-t64-codec" class="yfm-anchor" aria-hidden="true"><span class="visually-hidden">The T64 codec</span></a>The T64 codec</h2>
<p>I&nbsp;want to&nbsp;give a&nbsp;short description of&nbsp;the T64 codec, as&nbsp;it&nbsp;can have a&nbsp;strong impact on&nbsp;the compression ratio in&nbsp;the case of&nbsp;using bigger datatypes than needed.</p>
<p>The way it&nbsp;works is&nbsp;that it&nbsp;uses 64&nbsp;values and writes them in&nbsp;a&nbsp;matrix, then it&nbsp;transposes this matrix and the compression algorithm gets the transposed matrix to&nbsp;compress it.</p>
<p>For better understanding i&nbsp;will demonstrate the logic on&nbsp;5&nbsp;values between 0&nbsp;and 100&nbsp;and a&nbsp;data type length of&nbsp;5:</p>
<table>
<tbody>
<tr>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>5</p>
</td>
</tr>
<tr>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>4</p>
</td>
</tr>
<tr>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>9</p>
</td>
<td>
<p>1</p>
</td>
</tr>
<tr>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>5</p>
</td>
<td>
<p>7</p>
</td>
</tr>
<tr>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>8</p>
</td>
<td>
<p>1</p>
</td>
</tr>
</tbody>
</table>
<p>Looking at&nbsp;the number it&nbsp;is&nbsp;hard to&nbsp;compress them, but when applying a&nbsp;T64 transformation before, it&nbsp;gets a&nbsp;lot easier to&nbsp;compress:</p>
<table>
<tbody>
<tr>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
</tr>
<tr>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
</tr>
<tr>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>0</p>
</td>
</tr>
<tr>
<td>
<p>1</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>9</p>
</td>
<td>
<p>5</p>
</td>
<td>
<p>8</p>
</td>
</tr>
<tr>
<td>
<p>5</p>
</td>
<td>
<p>4</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>7</p>
</td>
<td>
<p>1</p>
</td>
</tr>
</tbody>
</table>
<p>So&nbsp;leading zeros in&nbsp;value representation will become zero values, ergo resulting in&nbsp;better compression ratios. Unfortunately T64 cannot be&nbsp;applied to&nbsp;all data types.</p>
<h2 id="data-types-and-disk-space-consumption"><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#data-types-and-disk-space-consumption" class="yfm-anchor" aria-hidden="true"><span class="visually-hidden">Data types and disk space consumption</span></a>Data types and disk space consumption</h2>
<p>So&nbsp;finally, let&rsquo;s see how much really gets stored on&nbsp;the disk, depending on&nbsp;different data types, codes and compression algorithms:</p></div></section></div></div><div class="bc-layout__item"><div class="col col-reset pc-block-base pc-block-base_reset-paddings pc-block-base_indentTop_0 pc-block-base_indentBottom_0 pc-constructor-block pc-constructor-block_type_blog-media-block"><section class="bc-wrapper bc-wrapper_padding-top_xs bc-wrapper_padding-bottom_l bc-media__container"><div class="bc-media__border" data-qa="blog-media-content"><div class="pc-Media bc-media__content"><picture><source srcSet="https://double.cloud/assets/blog/articles/DC_screen_Do DataTypes Still Matter-1.png.webp" type="image/webp"/><img alt="" src="../../../../assets/blog/articles/DC_screen_Do%20DataTypes%20Still%20Matter-1.png" class="pc-media-component-image__item bc-media__image"/></picture></div></div></section></div></div><div class="bc-layout__item"><div class="col col-reset pc-block-base pc-block-base_reset-paddings pc-block-base_indentTop_0 pc-block-base_indentBottom_0 pc-constructor-block pc-constructor-block_type_blog-yfm-block"><section class="bc-wrapper bc-wrapper_padding-top_xs bc-wrapper_padding-bottom_l"><div class="yfm yfm_blog yfm_reset_paddings yfm_no-list-reset"><p>We&nbsp;can see quite the interesting results.</p>
<p>When using the default compression algorithm, the amount of&nbsp;disk space (and therefore cost and I/O performance) varies quite a&nbsp;lot, going from 96MiB for UInt8 up&nbsp;to&nbsp;380MiB for UInt256.</p>
<p>Using zstd on&nbsp;the other hand leads to&nbsp;a&nbsp;lot smaller variance in&nbsp;sizes, minimum still being around 80MiB for UInt8 but the maximum is&nbsp;only 118MiB for UInt32 (or&nbsp;Decimal3), and even storing the values as&nbsp;string only results in&nbsp;111MiB for unsigned or&nbsp;119MiB for the signed ones.</p>
<p>When looking at&nbsp;the results from the T64 transformation, the effect is&nbsp;exactly as&nbsp;wished and the variance there goes from a&nbsp;minimum of&nbsp;83.8MiB to&nbsp;a&nbsp;maximum of&nbsp;85.5MiB with nearly no&nbsp;difference between lz4 and zstd.</p>
<h3 id="no-disk-consumption-difference-that-means-data-types-really-dont-matter-anymore?"><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#no-disk-consumption-difference-that-means-data-types-really-dont-matter-anymore?" class="yfm-anchor" aria-hidden="true"><span class="visually-hidden">No&nbsp;disk consumption difference&hellip; That means data types really don&rsquo;t matter anymore?</span></a>No&nbsp;disk consumption difference&hellip; That means data types really don&rsquo;t matter anymore?</h3>
<p>Whoah! Not so&nbsp;fast with your conclusions there!</p>
<p>Even with the results we&nbsp;saw regarding disk space usage, we&rsquo;re not at&nbsp;the end yet.</p>
<p>Of&nbsp;course I/O performance is&nbsp;the main bottleneck most of&nbsp;the time, when speaking about general performance of&nbsp;ClickHouse (or&nbsp;other DBMS), but there are more things to&nbsp;consider:</p>
<h2 id="speed-of-compression-algorithm"><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#speed-of-compression-algorithm" class="yfm-anchor" aria-hidden="true"><span class="visually-hidden">Speed of&nbsp;compression algorithm</span></a>Speed of&nbsp;compression algorithm</h2>
<p>If&nbsp;all the algorithms were equally fast, there would only be&nbsp;one algorithm to&nbsp;use, right?</p>
<p>But in&nbsp;real world scenarios, the compression algorithm can make a&nbsp;big difference in&nbsp;speed. Especially when inserting new data&hellip; this could have a&nbsp;big impact on&nbsp;how much inserts your application can handle with a&nbsp;given infrastructure.</p>
<h2 id="memory-usage"><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#memory-usage" class="yfm-anchor" aria-hidden="true"><span class="visually-hidden">Memory usage</span></a>Memory usage</h2>
<p>Even if&nbsp;different data types take up&nbsp;an&nbsp;equal amount of&nbsp;space on&nbsp;your disks because of&nbsp;compression, when using the data within queries you&rsquo;re not working with compressed data anymore, but ClickHouse has decompressed the data to&nbsp;throw it&nbsp;into the actual calculation logic.</p>
<p>We&nbsp;can already see this in&nbsp;a&nbsp;very simple example.</p>
<p>Let&rsquo;s say we&nbsp;need to&nbsp;group by&nbsp;our values within different data types, and want to&nbsp;get the average value of&nbsp;the id&nbsp;column:</p>

    <div class="yfm-clipboard">
    <pre><code class="hljs">SELECT u8 AS grp, avg(id) 
FROM dtypes.data_default 
GROUP BY grp 
ORDER BY grp
</code></pre>

    <svg width="16" height="16" viewBox="0 0 24 24" class="yfm-clipboard-button" data-animation="45">
        <path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path>
        <path stroke="currentColor" fill="transparent" stroke-width="1.5" d="M9.5 13l3 3l5 -5" visibility="hidden">
            <animate id="visibileAnimation-45" attributeName="visibility" from="hidden" to="visible" dur="0.2s" fill="freeze" begin></animate>
            <animate id="hideAnimation-45" attributeName="visibility" from="visible" to="hidden" dur="1s" begin="visibileAnimation-45.end+1" fill="freeze"></animate>
        </path>
    </svg>
    </div>
<p>Grouping as&nbsp;well as&nbsp;sorting has to&nbsp;be&nbsp;done on&nbsp;uncompressed data of&nbsp;course, that means the memory usage of&nbsp;this simple query differs quite a&nbsp;lot, depending on&nbsp;the data type.</p>
<p>(For simplicity, I&rsquo;ll omit the signed results from now on, as&nbsp;the results are quite redundant to&nbsp;the unsigned).</p></div></section></div></div><div class="bc-layout__item"><div class="col col-reset pc-block-base pc-block-base_reset-paddings pc-block-base_indentTop_0 pc-block-base_indentBottom_0 pc-constructor-block pc-constructor-block_type_blog-media-block"><section class="bc-wrapper bc-wrapper_padding-top_xs bc-wrapper_padding-bottom_l bc-media__container"><div class="bc-media__border" data-qa="blog-media-content"><div class="pc-Media bc-media__content"><picture><source srcSet="https://double.cloud/assets/blog/articles/DC_screen_Do DataTypes Still Matter-2.png.webp" type="image/webp"/><img alt="" src="../../../../assets/blog/articles/DC_screen_Do%20DataTypes%20Still%20Matter-2.png" class="pc-media-component-image__item bc-media__image"/></picture></div></div></section></div></div><div class="bc-layout__item"><div class="col col-reset pc-block-base pc-block-base_reset-paddings pc-block-base_indentTop_0 pc-block-base_indentBottom_0 pc-constructor-block pc-constructor-block_type_blog-yfm-block"><section class="bc-wrapper bc-wrapper_padding-top_xs bc-wrapper_padding-bottom_l"><div class="yfm yfm_blog yfm_reset_paddings yfm_no-list-reset"><p>So&nbsp;the data type has a&nbsp;direct impact on&nbsp;the memory usage of&nbsp;queries, which can make a&nbsp;big difference on&nbsp;how many queries you can run in&nbsp;parallel or&nbsp;even if&nbsp;you can get a&nbsp;query to&nbsp;finish in&nbsp;the first place.</p>
<h2 id="query-speed"><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#query-speed" class="yfm-anchor" aria-hidden="true"><span class="visually-hidden">Query speed</span></a>Query speed</h2>
<p>When working with large amounts of&nbsp;data, query speed is&nbsp;mostly bound on&nbsp;I/O performance. But when data is&nbsp;already in&nbsp;memory because of&nbsp;caching for example, the I/O impact isn&rsquo;t as&nbsp;important anymore.</p>
<p>Instead other things can take over.</p>
<p>It&nbsp;could make a&nbsp;difference how fast you can copy data within your memory itself, or&nbsp;it&nbsp;could make a&nbsp;difference if&nbsp;some hardware acceleration can be&nbsp;used.</p>
<p>Most cores have no&nbsp;problem handling 32&nbsp;bit integer values, but handling 256&nbsp;bit integers might need some special logic within your code. Some very fast sorting algorithms might just work for small data types while others work best only for integer types etc.</p>
<p>And of&nbsp;course, the decompression and transformation of&nbsp;the data also takes some time.</p>
<p>I&nbsp;ran the query from the last section via clickhouse-benchmark on&nbsp;to&nbsp;measure the speed regarding different types and algorithms:</p></div></section></div></div><div class="bc-layout__item"><div class="col col-reset pc-block-base pc-block-base_reset-paddings pc-block-base_indentTop_0 pc-block-base_indentBottom_0 pc-constructor-block pc-constructor-block_type_blog-media-block"><section class="bc-wrapper bc-wrapper_padding-top_xs bc-wrapper_padding-bottom_l bc-media__container"><div class="bc-media__border" data-qa="blog-media-content"><div class="pc-Media bc-media__content"><picture><source srcSet="https://double.cloud/assets/blog/articles/DC_screen_Do DataTypes Still Matter-3.png.webp" type="image/webp"/><img alt="" src="../../../../assets/blog/articles/DC_screen_Do%20DataTypes%20Still%20Matter-3.png" class="pc-media-component-image__item bc-media__image"/></picture></div></div></section></div></div><div class="bc-layout__item"><div class="col col-reset pc-block-base pc-block-base_reset-paddings pc-block-base_indentTop_0 pc-block-base_indentBottom_0 pc-constructor-block pc-constructor-block_type_blog-yfm-block"><section class="bc-wrapper bc-wrapper_padding-top_xs bc-wrapper_padding-bottom_l"><div class="yfm yfm_blog yfm_reset_paddings yfm_no-list-reset"><p>The absolute numbers are not that relevant here, only the relation between the types is&nbsp;interesting. As&nbsp;we&nbsp;can see, regarding query speed, data types can have a&nbsp;big impact on&nbsp;query performance.</p>
<h2 id="conclusion"><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#conclusion" class="yfm-anchor" aria-hidden="true"><span class="visually-hidden">Conclusion</span></a>Conclusion</h2>
<p>So&nbsp;overall our tests and benchmarks confirmed what my&nbsp;gut already thought directly.</p>
<p>Even with such a&nbsp;good compression as&nbsp;columns based DBMS (and especially ClickHouse) provide, data types do&nbsp;still matter quite a&nbsp;lot.</p>
<p>It&rsquo;s always worth it&nbsp;to&nbsp;check your data and choose the smallest data type needed, to&nbsp;handle all your data.</p>
<p>But regarding disk space alone, the case might be&nbsp;different.</p>
<p>Especially if&nbsp;you want to&nbsp;store a&nbsp;lot of&nbsp;uncleaned or&nbsp;raw data, you might simply just use Strings for that and use ZSTD as&nbsp;compression.</p>
<p>That way, you have the possibility to&nbsp;see when someone accidentally sends incorrect values as&nbsp;well (like user input instead of&nbsp;numbers).</p>
<p>But once you really want to&nbsp;work with your data in&nbsp;the fastest possible way, you should always invest the time to&nbsp;choose the right types.</p>
<p>Your future self will be&nbsp;grateful 🙂.</p></div></section></div></div></div><div class="col  col-12 col-lg-3  offset-0 offset-lg-1  order-2 order-lg-2 bc-layout__right-col"><div class="bc-layout__item"><div class="col col-reset pc-block-base pc-block-base_reset-paddings pc-block-base_indentTop_0 pc-block-base_indentBottom_0 pc-constructor-block pc-constructor-block_type_blog-yfm-block"><section class="bc-wrapper bc-wrapper_padding-top_xs bc-wrapper_padding-bottom_l"><div class="yfm yfm_blog yfm_reset_paddings yfm_no-list-reset"><p>In&nbsp;this article, we&rsquo;ll talk about:</p>
<ul>
<li><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#what-are-data-types?">What are data types?</a></li>
<li><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#how-does-compression-help-with-storing-data?">How does compression help with storing data?</a></li>
<li><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#dont-explain-basics-to-me-i-want-to-see-real-data">Don&rsquo;t explain basics to&nbsp;me&nbsp;I&nbsp;want to&nbsp;see real data</a></li>
<li><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#test-setup">Test setup</a></li>
<li><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#first-result">First result</a></li>
<li><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#compression-algorithms-and-codecs">Compression algorithms and codecs</a></li>
<li><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#the-t64-codec">The T64 codec</a></li>
<li><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#data-types-and-disk-space-consumption">Data types and disk space consumption</a></li>
<li><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#no-disk-consumption-difference-that-means-data-types-really-dont-matter-anymore">No&nbsp;disk consumption difference that means data types really don&rsquo;t matter anymore</a></li>
<li><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#speed-of-compression-algorithm">Speed of&nbsp;compression algorithm</a></li>
<li><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#memory-usage">Memory usage</a></li>
<li><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#query-speed">Query speed</a></li>
<li><a href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#conclusion">Conclusion</a></li>
</ul></div></section></div></div></div></div></section></div><div class="col col-reset pc-block-base pc-block-base_indentTop_l pc-block-base_indentBottom_l pc-constructor-block pc-constructor-block_type_content-layout-block"><div class="pc-content-layout-block pc-content-layout-block_size_l pc-content-layout-block_theme_default pc-content-layout-block_background"><div class="col  col-12 col-md-8 col-reset pc-content pc-content_size_l pc-content_centered pc-content_theme_default pc-content-layout-block__content"><div class="pc-title pc-content__title" id="g-uniq-886916"><div class="col  col-12 col-reset"><h2 class="pc-title-item pc-title-item_size_m pc-title-item_reset-margin" data-qa="undefined-header"><span class="pc-title-item__text">Start your trial today</span></h2></div></div><div class="pc-buttons pc-buttons_size_l pc-content__buttons pc-content__buttons_size_l"><a aria-describedby="g-uniq-886916" class="g-button g-button_view_action g-button_size_xl g-button_pin_round-round pc-button-block pc-button-block_size_xl pc-button-block_theme_accent pc-buttons__button" href="https://auth.double.cloud/s/signup" aria-disabled="false"><span class="g-button__text"><span class="pc-button-block__content"><span class="pc-button-block__text">Start free trial</span></span></span></a><a aria-describedby="g-uniq-886916" class="g-button g-button_view_outlined g-button_size_xl g-button_pin_round-round pc-button-block pc-button-block_size_xl pc-button-block_theme_pseudo pc-buttons__button" href="do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant.html#contact-us-form" aria-disabled="false"><span class="g-button__text"><span class="pc-button-block__content"><span class="pc-button-block__text">Contact us</span></span></span></a></div></div><div class="pc-content-layout-block__background"><div class="pc-storage-background-image pc-content-layout-block__background-item" data-qa="background-image"><picture data-qa="background-image-image"><source srcSet="../../../../assets/doublecloud/doublecloud-cover-5.png.webp" type="image/webp" data-qa="background-image-image-desktop-source-compressed"/><img alt="" src="../../../../assets/doublecloud/doublecloud-cover-5.png" class="pc-storage-background-image__img"/></picture></div></div></div></div><div class="col col-reset pc-block-base pc-block-base_reset-paddings pc-block-base_indentTop_0 pc-block-base_indentBottom_0 pc-constructor-block pc-constructor-block_type_blog-suggest-block"><section class="bc-wrapper bc-wrapper_padding-top_l bc-wrapper_padding-bottom_l"><div class="pc-SliderBlock"><div class="pc-title pc-SliderBlock__header pc-SliderBlock__header_no-description"><div class="col  col-12 col-sm-8 col-reset"><h2 class="pc-title-item pc-title-item_size_m pc-title-item_reset-margin" data-qa="undefined-header"><span class="pc-title-item__text">See also</span></h2></div></div><div class="pc-SliderBlock__animate-slides"><span style="font-size:0"></span><div><div class="slick-slider pc-slick-origin slick-initialized"><div class="slick-list"><div class="slick-track" style="width:100%;left:0%"><div data-index="0" class="slick-slide slick-active slick-current" tabindex="-1" aria-hidden="false" style="outline:none;width:33.333333333333336%"><div><div class="link" data-link-type="router"><a draggable="false" aria-labelledby="g-uniq-886917" aria-describedby="g-uniq-886919 g-uniq-886921" class="g-link g-link_view_normal pc-card-base-block pc-card-base-block_border_shadow bc-post-card__card" href="../01/break-free-from-vendor-lock-in-with-open-source-tech.html"><div class="pc-storage-background-image pc-card-base-block__header bc-post-card__header" data-qa="background-image"><picture data-qa="background-image-image"><source srcSet="../../../../assets/blog/articles/break-free-from-vendor-lock-in-with-open-source-tech-small-cover.png.webp" type="image/webp" data-qa="background-image-image-desktop-source-compressed"/><img alt="" src="../../../../assets/blog/articles/break-free-from-vendor-lock-in-with-open-source-tech-small-cover.png" class="pc-storage-background-image__img"/></picture><div class="pc-storage-background-image__container"><div class="pc-card-base-block__header-content"><div class="bc-post-card__image-container" data-qa="blog-suggest-header"></div></div></div></div><div class="pc-card-base-block__body"><div class="pc-card-base-block__content"><h3 class="bc-post-card__title bc-post-card__title_size_s"><span><span id="g-uniq-886917">Break free from vendor lock-in with open source tech</span></span></h3></div><div class="pc-card-base-block__footer"><div class="bc-post-info__container"><div class="bc-post-info__suggest-container"><div class="bc-post-info__item bc-post-info__item_size_s" id="g-uniq-886919">January 27, 2023</div><div class="bc-post-info__item bc-post-info__item_size_s" id="g-uniq-886921"><span class="bc-post-info__icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" class="g-icon bc-post-info__icon-color" fill="currentColor" stroke="none" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 16.004a8 8 0 1 1 0-16 8 8 0 0 1 0 16Zm0-2a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm3.357-3.736a1 1 0 0 0-.342-1.372L9 7.688V5.004a1 1 0 0 0-2 0v3.25a1 1 0 0 0 .486.857l2.5 1.5a1 1 0 0 0 1.371-.343Z"></path></svg></svg></span>10 mins to read</div></div></div></div></div></a></div></div></div><div data-index="1" class="slick-slide slick-active" tabindex="-1" aria-hidden="false" style="outline:none;width:33.333333333333336%"><div><div class="link" data-link-type="router"><a draggable="false" aria-labelledby="g-uniq-886922" aria-describedby="g-uniq-886924 g-uniq-886926" class="g-link g-link_view_normal pc-card-base-block pc-card-base-block_border_shadow bc-post-card__card" href="../01/the-ad-sectors-next-frontier-data-clean-rooms.html"><div class="pc-storage-background-image pc-card-base-block__header bc-post-card__header" data-qa="background-image"><picture data-qa="background-image-image"><source srcSet="../../../../assets/blog/articles/the-ad-sector’s-next-frontier-data-clean-rooms-small-cover.png.webp" type="image/webp" data-qa="background-image-image-desktop-source-compressed"/><img alt="" src="../../../../assets/blog/articles/the-ad-sector’s-next-frontier-data-clean-rooms-small-cover.png" class="pc-storage-background-image__img"/></picture><div class="pc-storage-background-image__container"><div class="pc-card-base-block__header-content"><div class="bc-post-card__image-container" data-qa="blog-suggest-header"></div></div></div></div><div class="pc-card-base-block__body"><div class="pc-card-base-block__content"><h3 class="bc-post-card__title bc-post-card__title_size_s"><span><span id="g-uniq-886922">The Ad sector’s next frontier: Data clean rooms</span></span></h3></div><div class="pc-card-base-block__footer"><div class="bc-post-info__container"><div class="bc-post-info__suggest-container"><div class="bc-post-info__item bc-post-info__item_size_s" id="g-uniq-886924">January 27, 2023</div><div class="bc-post-info__item bc-post-info__item_size_s" id="g-uniq-886926"><span class="bc-post-info__icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" class="g-icon bc-post-info__icon-color" fill="currentColor" stroke="none" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 16.004a8 8 0 1 1 0-16 8 8 0 0 1 0 16Zm0-2a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm3.357-3.736a1 1 0 0 0-.342-1.372L9 7.688V5.004a1 1 0 0 0-2 0v3.25a1 1 0 0 0 .486.857l2.5 1.5a1 1 0 0 0 1.371-.343Z"></path></svg></svg></span>10 mins to read</div></div></div></div></div></a></div></div></div><div data-index="2" class="slick-slide slick-active" tabindex="-1" aria-hidden="false" style="outline:none;width:33.333333333333336%"><div><div class="link" data-link-type="router"><a draggable="false" aria-labelledby="g-uniq-886927" aria-describedby="g-uniq-886929 g-uniq-886931" class="g-link g-link_view_normal pc-card-base-block pc-card-base-block_border_shadow bc-post-card__card" href="../01/etl-or-elt-do-you-know-the-difference.html"><div class="pc-storage-background-image pc-card-base-block__header bc-post-card__header" data-qa="background-image"><picture data-qa="background-image-image"><source srcSet="../../../../assets/blog/articles/etl-vs-elt-small-cover.jpg.webp" type="image/webp" data-qa="background-image-image-desktop-source-compressed"/><img alt="" src="../../../../assets/blog/articles/etl-vs-elt-small-cover.jpg" class="pc-storage-background-image__img"/></picture><div class="pc-storage-background-image__container"><div class="pc-card-base-block__header-content"><div class="bc-post-card__image-container" data-qa="blog-suggest-header"></div></div></div></div><div class="pc-card-base-block__body"><div class="pc-card-base-block__content"><h3 class="bc-post-card__title bc-post-card__title_size_s"><span><span id="g-uniq-886927">ETL vs ELT: Choosing the right approach for your data integration needs</span></span></h3></div><div class="pc-card-base-block__footer"><div class="bc-post-info__container"><div class="bc-post-info__suggest-container"><div class="bc-post-info__item bc-post-info__item_size_s" id="g-uniq-886929">January 27, 2023</div><div class="bc-post-info__item bc-post-info__item_size_s" id="g-uniq-886931"><span class="bc-post-info__icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" class="g-icon bc-post-info__icon-color" fill="currentColor" stroke="none" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 16.004a8 8 0 1 1 0-16 8 8 0 0 1 0 16Zm0-2a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm3.357-3.736a1 1 0 0 0-.342-1.372L9 7.688V5.004a1 1 0 0 0-2 0v3.25a1 1 0 0 0 .486.857l2.5 1.5a1 1 0 0 0 1.371-.343Z"></path></svg></svg></span>15 mins to read</div></div></div></div></div></a></div></div></div></div></div></div><div class="pc-SliderBlock__footer"></div></div></div></div></section></div></div></div></div></div></main></div></div></div><div class="bc-prompt bc-prompt_close"><div class="bc-prompt__content"><span class="bc-prompt__text">Sign in to save this post</span><div class="bc-prompt__actions"><button class="g-button g-button_view_action g-button_size_l g-button_pin_round-round bc-prompt__action" type="button"><span class="g-button__text">Sign In</span></button></div></div></div></div><footer class="footer"><div class="pc-Grid"><div class="container-fluid "><div class="row"><div class="col  col-12 col-md-4 footer__column"><div class="link" data-link-type="router"><div class="logo footer__logo"><img alt="Logo Icon" src="../../../../assets/logo/dc-logo-dark.svg" width="178" height="36" decoding="async" data-nimg="future" class="logo__icon" loading="lazy" style="color:transparent"/><span class="logo__text"></span></div></div></div><div class="col  col-6 col-sm-3 col-md-2 footer__column"><div class="footer__column-title">Products</div><a aria-label="Managed Service for ClickHouse®" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../services/managed-clickhouse.html"><div class="navigation-item"><span class="navigation-item__text">Managed Service for ClickHouse®</span></div></a><a aria-label="Managed Service for Apache Kafka®" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../services/managed-kafka.html"><div class="navigation-item"><span class="navigation-item__text">Managed Service for Apache Kafka®</span></div></a><a aria-label="Managed Service for Apache Airflow®" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../services/managed-airflow/index.html"><div class="navigation-item"><span class="navigation-item__text">Managed Service for Apache Airflow®</span></div></a><a aria-label="Data Transfer" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../services/doublecloud-transfer.html"><div class="navigation-item"><span class="navigation-item__text">Data Transfer</span></div></a><a aria-label="Data Visualization" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../services/doublecloud-visualization.html"><div class="navigation-item"><span class="navigation-item__text">Data Visualization</span></div></a></div><div class="col  col-6 col-sm-3 col-md-2 footer__column"><div class="footer__column-title">Solutions</div><a aria-label="Case studies" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../resources/case-studies/index.html"><div class="navigation-item"><span class="navigation-item__text">Case studies</span></div></a><a aria-label="Customer-facing analytics" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../customer-facing-analytics/index.html"><div class="navigation-item"><span class="navigation-item__text">Customer-facing analytics</span></div></a><a aria-label="Real-time analytics" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../solutions/real-time-analytics/index.html"><div class="navigation-item"><span class="navigation-item__text">Real-time analytics</span></div></a><a aria-label="Observability and monitoring" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../solutions/observability-and-monitoring/index.html"><div class="navigation-item"><span class="navigation-item__text">Observability and monitoring</span></div></a><a aria-label="AdTech and MarTech data analytics" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../solutions/adtech.html"><div class="navigation-item"><span class="navigation-item__text">AdTech and MarTech data analytics</span></div></a><a aria-label="Analytics for mobile and gaming Apps" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../solutions/web-mobile-gaming-apps.html"><div class="navigation-item"><span class="navigation-item__text">Analytics for mobile and gaming Apps</span></div></a><a aria-label="EdTech data analytics" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../solutions/edtech/index.html"><div class="navigation-item"><span class="navigation-item__text">EdTech data analytics</span></div></a><a aria-label="FinTech data analytics" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../solutions/fintech-real-time-analytics/index.html"><div class="navigation-item"><span class="navigation-item__text">FinTech data analytics</span></div></a></div><div class="col  col-6 col-sm-3 col-md-2 footer__column"><div class="footer__column-title">Resources</div><a aria-label="Documentation" class="navigation-item navigation-item_type_link footer__column-link" href="../../../../docs/index.html"><div class="navigation-item"><span class="navigation-item__text">Documentation</span></div></a><a aria-label="Webinars" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../webinars/index.html"><div class="navigation-item"><span class="navigation-item__text">Webinars</span></div></a><a aria-label="Blog" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../index.html"><div class="navigation-item navigation-item_selected"><span class="navigation-item__text">Blog</span></div></a><a aria-label="Support" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../support/index.html"><div class="navigation-item"><span class="navigation-item__text">Support</span></div></a><a href="https://status.double.cloud/" aria-label="Status updates" class="navigation-item navigation-item_type_link footer__column-link" target="_blank" rel="noopener noreferrer"><div class="navigation-item"><span class="navigation-item__text">Status updates</span></div></a><a aria-label="Product comparisons" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../comparison/index.html"><div class="navigation-item"><span class="navigation-item__text">Product comparisons</span></div></a><a aria-label="Site map" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../sitemap/index.html"><div class="navigation-item"><span class="navigation-item__text">Site map</span></div></a></div><div class="col  col-6 col-sm-3 col-md-2 footer__column"><div class="footer__column-title">Company</div><a aria-label="About DoubleCloud" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../company/about-us.html"><div class="navigation-item"><span class="navigation-item__text">About DoubleCloud</span></div></a><a aria-label="Careers" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../company/careers.html"><div class="navigation-item"><span class="navigation-item__text">Careers</span></div></a><a aria-label="AWS Partnership" class="navigation-item navigation-item_type_link footer__column-link" data-link-type="router" href="../../../../aws-partnership/index.html"><div class="navigation-item"><span class="navigation-item__text">AWS Partnership</span></div></a></div></div><div class="row"><div class="col  col-12 footer__underline"><div class="footer__underline-links"><a href="../../../../legal/customer_agreement/index.html" aria-label="Customer Agreement" class="navigation-item navigation-item_type_link footer__underline-link" target="_blank"><div class="navigation-item"><span class="navigation-item__text">Customer Agreement</span></div></a><a href="../../../../legal/privacy.html" aria-label="Privacy Policy" class="navigation-item navigation-item_type_link footer__underline-link" target="_blank"><div class="navigation-item"><span class="navigation-item__text">Privacy Policy</span></div></a><a aria-label="Pricing" class="navigation-item navigation-item_type_link footer__underline-link" data-link-type="router" href="../../../../pricing.html"><div class="navigation-item"><span class="navigation-item__text">Pricing</span></div></a><a href="../../../../security.html" aria-label="Security" class="navigation-item navigation-item_type_link footer__underline-link" target="_blank"><div class="navigation-item"><span class="navigation-item__text">Security</span></div></a></div><div class="footer__underline-copyright">© 2024 DoubleCloud</div></div></div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json" nonce="EO5sodTPIlmOhJOfnXA9Iw==">{"props":{"pageProps":{"data":{"status":"fulfilled","pageContent":{"page":{"id":56,"name":"blog/posts/2023/02/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant","createdAt":"2024-08-21T09:49:05.114Z","updatedAt":"2024-08-21T09:49:05.114Z","type":"default","isDeleted":false,"versionOnTranslationId":null,"pageId":56,"locale":"en","publishedVersionId":2178,"lastVersionId":2178,"content":{"blocks":[{"type":"blog-header-block","resetPaddings":true,"paddingBottom":"l","width":"m","verticalOffset":"l","background":{"image":{"src":"/assets/blog/articles/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant-cover.png","disableCompress":true,"fetchPriority":"high"},"color":"#000000","fullWidth":false}},{"type":"blog-layout-block","resetPaddings":true,"mobileOrder":"reverse","children":[{"type":"blog-yfm-block","column":"right","resetPaddings":true,"text":"\u003cp\u003eIn\u0026nbsp;this article, we\u0026rsquo;ll talk about:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#what-are-data-types?\"\u003eWhat are data types?\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#how-does-compression-help-with-storing-data?\"\u003eHow does compression help with storing data?\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#dont-explain-basics-to-me-i-want-to-see-real-data\"\u003eDon\u0026rsquo;t explain basics to\u0026nbsp;me\u0026nbsp;I\u0026nbsp;want to\u0026nbsp;see real data\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#test-setup\"\u003eTest setup\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#first-result\"\u003eFirst result\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#compression-algorithms-and-codecs\"\u003eCompression algorithms and codecs\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#the-t64-codec\"\u003eThe T64 codec\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#data-types-and-disk-space-consumption\"\u003eData types and disk space consumption\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#no-disk-consumption-difference-that-means-data-types-really-dont-matter-anymore\"\u003eNo\u0026nbsp;disk consumption difference that means data types really don\u0026rsquo;t matter anymore\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#speed-of-compression-algorithm\"\u003eSpeed of\u0026nbsp;compression algorithm\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#memory-usage\"\u003eMemory usage\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#query-speed\"\u003eQuery speed\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#conclusion\"\u003eConclusion\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e"},{"type":"blog-yfm-block","column":"left","resetPaddings":true,"text":"\u003cp\u003eI\u0026rsquo;ve been working with databases for over twenty years now and one of\u0026nbsp;the first things I\u0026nbsp;always do\u0026nbsp;when optimizing performance is\u0026nbsp;to\u0026nbsp;take a\u0026nbsp;look at\u0026nbsp;the used data types.\u003c/p\u003e\n\u003cp\u003eIt\u0026nbsp;may not sound like much if\u0026nbsp;a\u0026nbsp;single number takes up\u0026nbsp;1,2,4 or\u0026nbsp;8\u0026nbsp;bytes of\u0026nbsp;storage, but if\u0026nbsp;you want to\u0026nbsp;store billions of\u0026nbsp;numbers, a\u0026nbsp;factor of\u0026nbsp;8\u0026nbsp;will have a\u0026nbsp;big impact on\u0026nbsp;the final space you need\u0026hellip; and therefore have a\u0026nbsp;direct impact on\u0026nbsp;your database cost and also speed of\u0026nbsp;queries.\u003c/p\u003e\n\u003cp\u003eLately, I\u0026nbsp;had a\u0026nbsp;short discussion with a\u0026nbsp;potential customer.\u003c/p\u003e\n\u003cp\u003eThey were asking if\u0026nbsp;choosing the smallest data type is\u0026nbsp;still important when working with ClickHouse?\u003c/p\u003e\n\u003cp\u003eTheir reasoning behind this was that ClickHouse, as\u0026nbsp;well as\u0026nbsp;other column based DBMS, compress not rows, but single columns, and therefore the compression algorithm should be\u0026nbsp;able to\u0026nbsp;compress the numbers, no\u0026nbsp;matter if\u0026nbsp;we\u0026nbsp;were choosing the smallest possible type, or\u0026nbsp;just use 64-Bit integer all the time.\u003c/p\u003e\n\u003cp\u003eI\u0026nbsp;instantly said yes, as\u0026nbsp;even in\u0026nbsp;column based DBMS data is\u0026nbsp;not always compressed, but still\u0026hellip; it\u0026nbsp;stayed in\u0026nbsp;my\u0026nbsp;mind to\u0026nbsp;evaluate in\u0026nbsp;more detail, if\u0026nbsp;data types still matter in\u0026nbsp;a\u0026nbsp;column based context.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;give away the TL;DR: Yes, data types still matter, but not if\u0026nbsp;you\u0026rsquo;re only focusing on\u0026nbsp;disk usage.\u003c/p\u003e\n\u003ch2 id=\"what-are-data-types?\"\u003e\u003ca href=\"#what-are-data-types?\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eWhat are data types?\u003c/span\u003e\u003c/a\u003eWhat are data types?\u003c/h2\u003e\n\u003cp\u003eBefore we\u0026nbsp;are going into the details and benchmarking results, I\u0026nbsp;want to\u0026nbsp;give a\u0026nbsp;short recap about what data types are.\u003c/p\u003e\n\u003cp\u003eBasically data types describe the way to\u0026nbsp;represent data within a\u0026nbsp;DBMS (in\u0026nbsp;our case).\u003c/p\u003e\n\u003cp\u003eIf\u0026nbsp;you want to\u0026nbsp;store for example, the number 57, you have multiple possibilities to\u0026nbsp;store this number in\u0026nbsp;ClickHouse.\u003c/p\u003e\n\u003cp\u003eYou can use some unsigned integer type like UInt8 or\u0026nbsp;UInt64, other possibilities are signed integers like Int16 or\u0026nbsp;Int32.\u003c/p\u003e\n\u003cp\u003eMaybe not instantly in\u0026nbsp;your focus but also possible would be\u0026nbsp;the String type or\u0026nbsp;to\u0026nbsp;make use of\u0026nbsp;the decimal type.\u003c/p\u003e\n\u003cp\u003eThe main difference between all these types is, how big the numbers can grow and how much space a\u0026nbsp;single number takes up.\u003c/p\u003e\n\u003cp\u003eUInt8 for example means you can store unsigned integers with a\u0026nbsp;maximum of\u0026nbsp;2⁸ (256). Each number takes up\u0026nbsp;8\u0026nbsp;bits (hence the name UInt8) or\u0026nbsp;1\u0026nbsp;byte of\u0026nbsp;space.\u003c/p\u003e\n\u003cp\u003eInt32 on\u0026nbsp;the other hand allows you to\u0026nbsp;store signed numbers between -2\u0026sup3;\u0026sup1; and 2\u0026sup3;\u0026sup1;-1, but each number you store takes up\u0026nbsp;32\u0026nbsp;bits or\u0026nbsp;4\u0026nbsp;bytes of\u0026nbsp;space.\u003c/p\u003e\n\u003cp\u003eSo\u0026nbsp;if\u0026nbsp;you want to\u0026nbsp;store our example number 57, when storing that number into a\u0026nbsp;Int32 column you are actually storing the 57\u0026nbsp;in\u0026nbsp;one byte and a\u0026nbsp;lot of\u0026nbsp;additional zeros to\u0026nbsp;fill up\u0026nbsp;the other 3\u0026nbsp;bytes.\u003c/p\u003e\n\u003cp\u003eIf\u0026nbsp;you want to\u0026nbsp;store the number 57\u0026nbsp;in\u0026nbsp;a\u0026nbsp;string column, then the single digits would be\u0026nbsp;converted into their ASCII representation and the total length of\u0026nbsp;the string would be\u0026nbsp;added to\u0026nbsp;the storage, hence we\u0026nbsp;would store the information string of\u0026nbsp;length 2\u0026nbsp;and two bytes representing the digit 5\u0026nbsp;and the digit 7.\u003c/p\u003e\n\u003cp\u003eThis would make up\u0026nbsp;a\u0026nbsp;total of\u0026nbsp;at\u0026nbsp;least 3\u0026nbsp;bytes (assuming the length is\u0026nbsp;stored in\u0026nbsp;one byte) used for storing the number 57\u0026nbsp;in\u0026nbsp;a\u0026nbsp;String field.\u003c/p\u003e\n\u003cp\u003eSo\u0026nbsp;no\u0026nbsp;matter if\u0026nbsp;we\u0026nbsp;add additional zeros to\u0026nbsp;the data or\u0026nbsp;always adding the length of\u0026nbsp;the number to\u0026nbsp;it, when using bigger data types than needed, we\u0026nbsp;are adding redundant data.\u003cbr /\u003e\nThis is\u0026nbsp;where compression comes into play.\u003c/p\u003e\n\u003ch2 id=\"how-does-compression-help-with-storing-data?\"\u003e\u003ca href=\"#how-does-compression-help-with-storing-data?\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eHow does compression help with storing data?\u003c/span\u003e\u003c/a\u003eHow does compression help with storing data?\u003c/h2\u003e\n\u003cp\u003eAs\u0026nbsp;we\u0026rsquo;ve seen above, choosing the right data type can have a\u0026nbsp;big impact on\u0026nbsp;the amount of\u0026nbsp;data we\u0026nbsp;need to\u0026nbsp;store on\u0026nbsp;disk, even for a\u0026nbsp;single number.\u003c/p\u003e\n\u003cp\u003eBut what if\u0026nbsp;we\u0026nbsp;don\u0026rsquo;t want to\u0026nbsp;only store single numbers\u0026hellip; but thousands, or\u0026nbsp;millions or\u0026nbsp;even trillions of\u0026nbsp;numbers?\u003c/p\u003e\n\u003cp\u003eIf\u0026nbsp;we\u0026nbsp;want to\u0026nbsp;store them directly, the impact of\u0026nbsp;the data type is\u0026nbsp;exactly the same as\u0026nbsp;if\u0026nbsp;storing a\u0026nbsp;single number.\u003c/p\u003e\n\u003cp\u003eIf\u0026nbsp;one number takes up\u0026nbsp;3\u0026nbsp;bytes then one million numbers take up\u0026nbsp;3\u0026nbsp;million bytes, and if\u0026nbsp;a\u0026nbsp;single number takes up\u0026nbsp;only 1\u0026nbsp;byte then a\u0026nbsp;million number takes up\u0026nbsp;only 1\u0026nbsp;million bytes.\u003c/p\u003e\n\u003cp\u003eThat\u0026rsquo;s where compression kicks in.\u003c/p\u003e\n\u003cp\u003eI\u0026nbsp;won\u0026rsquo;t go\u0026nbsp;into details about how compression works, as\u0026nbsp;this could fill several books (which are already written as\u0026nbsp;well for some parts), but I\u0026nbsp;just want to\u0026nbsp;explain some generics.\u003c/p\u003e\n\u003cp\u003eCompression tries to\u0026nbsp;remove the amount of\u0026nbsp;redundancy of\u0026nbsp;data.\u003c/p\u003e\n\u003cp\u003eFor example if\u0026nbsp;you have a\u0026nbsp;list of\u0026nbsp;numbers: 5,5,5,5,5,5,5,5,8,8,8,9,1 you could write it\u0026nbsp;in\u0026nbsp;a\u0026nbsp;compressed way: 8\u003cem\u003e5,3\u003c/em\u003e8,9,1\u003c/p\u003e\n\u003cp\u003eAs\u0026nbsp;we\u0026nbsp;can see in\u0026nbsp;that simple example, the big amount of\u0026nbsp;fives could be\u0026nbsp;compressed quite well. The original list took 13\u0026nbsp;characters (without commas), the new one only 8.\u003c/p\u003e\n\u003cp\u003eBut what about different data types in\u0026nbsp;this regard?\u003c/p\u003e\n\u003cp\u003eWhen choosing a\u0026nbsp;non optimal data type, you\u0026rsquo;re basically adding additional space that a\u0026nbsp;single value would take up.\u003c/p\u003e\n\u003cp\u003eBut as\u0026nbsp;seen before, this space is\u0026nbsp;mostly filled with zeros, so\u0026nbsp;if\u0026nbsp;you have millions of\u0026nbsp;values, you\u0026rsquo;re actually adding multiple millions of\u0026nbsp;zeros to\u0026nbsp;your data, which means you are adding a\u0026nbsp;lot of\u0026nbsp;redundant data, and compression would remove redundancy.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;go\u0026nbsp;back to\u0026nbsp;our example, let\u0026rsquo;s say in\u0026nbsp;our list of\u0026nbsp;numbers each number takes up\u0026nbsp;3\u0026nbsp;bytes, then the list would look as\u0026nbsp;follows:\u003c/p\u003e\n\u003cp\u003e005,005,005,005,005,005,005,005,008,008,008,009,001 which would result in\u0026nbsp;39\u0026nbsp;characters to\u0026nbsp;store.\u003c/p\u003e\n\u003cp\u003eBut the compressed list would look like this: 8\u003cem\u003e005,3\u003c/em\u003e008,009,001 or\u0026nbsp;16\u0026nbsp;characters.\u003c/p\u003e\n\u003cp\u003eSo\u0026nbsp;even as\u0026nbsp;the raw data takes up\u0026nbsp;3\u0026nbsp;times more space as\u0026nbsp;we\u0026nbsp;are choosing a\u0026nbsp;different data type, the compressed data only takes up\u0026nbsp;2\u0026nbsp;times more.\u003c/p\u003e\n\u003ch2 id=\"dont-explain-basics-to-me-i-want-to-see-real-data\"\u003e\u003ca href=\"#dont-explain-basics-to-me-i-want-to-see-real-data\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eDon\u0026rsquo;t explain basics to\u0026nbsp;me\u0026nbsp;I\u0026nbsp;want to\u0026nbsp;see real data\u003c/span\u003e\u003c/a\u003eDon\u0026rsquo;t explain basics to\u0026nbsp;me\u0026nbsp;I\u0026nbsp;want to\u0026nbsp;see real data\u003c/h2\u003e\n\u003cp\u003eAs\u0026nbsp;described above, choosing bigger data types than needed mainly adds redundant data to\u0026nbsp;the uncompressed blocks, but when writing data to\u0026nbsp;disk, the redundancy should be\u0026nbsp;eliminated again thanks to\u0026nbsp;compression.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;test this, we\u0026nbsp;use a\u0026nbsp;simple test setup.\u003c/p\u003e\n\u003cp\u003eWe\u0026rsquo;ll store 100\u0026nbsp;million rows, containing values between 0\u0026nbsp;and 100\u0026nbsp;in\u0026nbsp;different data types.\u003c/p\u003e\n\u003cp\u003eThen I\u0026rsquo;ll look at\u0026nbsp;the amount of\u0026nbsp;space these take up\u0026nbsp;on\u0026nbsp;disk, and later on\u0026nbsp;we\u0026rsquo;ll do\u0026nbsp;some simple queries to\u0026nbsp;see if\u0026nbsp;different data types have an\u0026nbsp;impact on\u0026nbsp;performance.\u003c/p\u003e\n\u003ch2 id=\"test-setup\"\u003e\u003ca href=\"#test-setup\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eTest setup\u003c/span\u003e\u003c/a\u003eTest setup\u003c/h2\u003e\n\u003cp\u003eFirst we\u0026nbsp;define our test table choosing clickhouse default compression and a\u0026nbsp;lot of\u0026nbsp;different data types to\u0026nbsp;store the numbers 0\u0026nbsp;\u0026mdash; 100\u0026nbsp;in\u0026nbsp;it:\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eCREATE TABLE dtypes.data_default (\n  id UInt32,\n  u8 UInt8,\n  u16 UInt16,\n  u32 UInt32,\n  u64 UInt64,\n  u256 UInt256,\n  udec3 Decimal(3,0),\n  udec30 Decimal(30,0),\n  ulstr LowCardinality(String),\n  ustr String,\n\n  i8 Int8,\n  i16 Int16,\n  i32 Int32,\n  i64 Int64,\n  i256 Int256,\n\n  idec3 Decimal(3,0),\n  idec30 Decimal(30,0),\n  ilstr LowCardinality(String),\n  istr String\n) engine=MergeTree\norder by id;\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"132\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-132\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-132\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-132.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003cp\u003eTo\u0026nbsp;check if\u0026nbsp;there is\u0026nbsp;a\u0026nbsp;difference when storing signed values, I\u0026nbsp;also added the same columns again but prefixed with an\u0026nbsp;i.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;get the signed values but keep the data distribution, we\u0026rsquo;ll subtract 50\u0026nbsp;from the unsigned value, resulting in\u0026nbsp;values from -50 to\u0026nbsp;50.\u003c/p\u003e\n\u003cp\u003eNow we\u0026rsquo;ll fill the table with 100\u0026nbsp;million rows, generating random numbers between 0\u0026nbsp;and 100. We\u0026nbsp;explicitly want to\u0026nbsp;store random values, to\u0026nbsp;make sure our dataset itself compresses quite badly, as\u0026nbsp;we\u0026nbsp;only want to\u0026nbsp;see if\u0026nbsp;the redundancy of\u0026nbsp;the data type will be\u0026nbsp;compressed.\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eINSERT INTO dtypes.data_default\nSELECT number, rand() % 100 AS u, u, u, u, u, u, u, \n  toString(u), toString(u), \n  rand() % 100 - 50 AS i, i, i, i, i, \n  i, i, toString(i), toString(i)\nFROM numbers(100000000);\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"142\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-142\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-142\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-142.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003cp\u003eI\u0026nbsp;manually ran an\u0026nbsp;OPTIMIZE TABLE data_default FINAL to\u0026nbsp;make sure the data is\u0026nbsp;in\u0026nbsp;as\u0026nbsp;less parts possible, to\u0026nbsp;see the strongest effect of\u0026nbsp;the compression\u003c/p\u003e\n\u003ch2 id=\"first-result\"\u003e\u003ca href=\"#first-result\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eFirst result\u003c/span\u003e\u003c/a\u003eFirst result\u003c/h2\u003e\n\u003cp\u003eSo\u0026nbsp;how much space does each data type now take up\u0026nbsp;on\u0026nbsp;disk?\u003c/p\u003e\n\u003cp\u003eFortunately, ClickHouse collects a\u0026nbsp;lot of\u0026nbsp;statistics in\u0026nbsp;its system tables, so\u0026nbsp;we\u0026nbsp;can easily get the wanted data by\u0026nbsp;running a\u0026nbsp;simple query:\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eSELECT name, substring(type, 1, 50) as type, \n  formatReadableSize(data_compressed_bytes) AS comp,\n  formatReadableSize(data_uncompressed_bytes) AS uncomp,\n  round(data_uncompressed_bytes / data_compressed_bytes, 2) AS \n    ratio\nFROM system.columns\nWHERE database ='dtypes' AND table = 'data_default'\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"155\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-155\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-155\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-155.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003cp\u003eAnd this is\u0026nbsp;the result:\u003c/p\u003e\n\u003ctable\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003ename\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003etype\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003ecomp\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003euncomp\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003eratio\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eid\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e383.12 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.78 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.37 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu16\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt16\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e146.84 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e190.73 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.3\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e279.67 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.36\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu64\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt64\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e285.15 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e762.94 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e2.68\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu256\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt256\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e380.01 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e2.98 GiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e8.03\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eudec3\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eDecimal (3, 0)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e279.67 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.36\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eudec30\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eDecimal (30, 0)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e286.53 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.49 GiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5.33\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eulstr\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eLowCardinality (String)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.89 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.56 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eustr\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eString\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e182.86 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e276.57 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.51\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.78 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.37 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei16\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt16\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e155.06 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e190.73 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.23\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e281.05 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.36\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei64\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt64\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e284.83 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e762.94 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e2.68\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei256\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt256\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e379.24 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e2.98 GiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e8.05\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eidec3\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eDecimal (3, 0)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e281.05 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.36\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eidec30\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eDecimal (30, 0)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e285.77 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.49 GiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5.34\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eilstr\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eLowCardinality (String)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.89 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.56 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eistr\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eString\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e189.39 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e315.67 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.67\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eAs\u0026nbsp;you can see, the results resemble the basic assumption we\u0026nbsp;had, that the bigger the data type is, the better the compression ratio becomes, or\u0026nbsp;simply speaking, if\u0026nbsp;a\u0026nbsp;bigger data type in\u0026nbsp;theory takes up\u0026nbsp;double the space than a\u0026nbsp;smaller data type, it\u0026nbsp;doesn\u0026rsquo;t mean that after compression the data still takes up\u0026nbsp;double the space on\u0026nbsp;disk.\u003c/p\u003e\n\u003cp\u003eBut we\u0026nbsp;also see that choosing the smallest data type possible (UInt8) takes up\u0026nbsp;95MiB while the biggest one (UInt256) takes 380MiB, so\u0026nbsp;still a\u0026nbsp;factor of\u0026nbsp;4\u0026nbsp;for disk usage, which does still matter a\u0026nbsp;lot.\u003c/p\u003e\n\u003ch2 id=\"compression-algorithms-and-codecs\"\u003e\u003ca href=\"#compression-algorithms-and-codecs\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eCompression algorithms and codecs\u003c/span\u003e\u003c/a\u003eCompression algorithms and codecs\u003c/h2\u003e\n\u003cp\u003eAs\u0026nbsp;disk I/O is\u0026nbsp;the most important factor for speed in\u0026nbsp;ClickHouse and disk space being an\u0026nbsp;important factor for cost as\u0026nbsp;well, we\u0026nbsp;could already finish here and conclude that data types still matter and all would be\u0026nbsp;fine.\u003c/p\u003e\n\u003cp\u003eBut ClickHouse has such a\u0026nbsp;wide variety of\u0026nbsp;possibilities for defining columns, using special compression algorithms and codecs for optimizing the compression ratio.\u003c/p\u003e\n\u003cp\u003eThe default algorithm used is\u0026nbsp;LZ4, which is\u0026nbsp;fast and has a\u0026nbsp;good compression ratio overall. But using zstd can lead to\u0026nbsp;a\u0026nbsp;better compression with only a\u0026nbsp;little more impact on\u0026nbsp;the CPU.\u003c/p\u003e\n\u003cp\u003eThere are also some special codecs which can be\u0026nbsp;applied to\u0026nbsp;make data more compressible like T64.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;change a\u0026nbsp;codec in\u0026nbsp;ClickHouse you just need to\u0026nbsp;change the definition of\u0026nbsp;the column you want to\u0026nbsp;apply a\u0026nbsp;different codec on:\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eCREATE TABLE dtypes.data_t64_zstd (\nid UInt32,\nu8 UInt8  CODEC(T64, ZSTD),\nu16 UInt16  CODEC(T64, ZSTD),\n…\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"727\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-727\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-727\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-727.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"the-t64-codec\"\u003e\u003ca href=\"#the-t64-codec\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eThe T64 codec\u003c/span\u003e\u003c/a\u003eThe T64 codec\u003c/h2\u003e\n\u003cp\u003eI\u0026nbsp;want to\u0026nbsp;give a\u0026nbsp;short description of\u0026nbsp;the T64 codec, as\u0026nbsp;it\u0026nbsp;can have a\u0026nbsp;strong impact on\u0026nbsp;the compression ratio in\u0026nbsp;the case of\u0026nbsp;using bigger datatypes than needed.\u003c/p\u003e\n\u003cp\u003eThe way it\u0026nbsp;works is\u0026nbsp;that it\u0026nbsp;uses 64\u0026nbsp;values and writes them in\u0026nbsp;a\u0026nbsp;matrix, then it\u0026nbsp;transposes this matrix and the compression algorithm gets the transposed matrix to\u0026nbsp;compress it.\u003c/p\u003e\n\u003cp\u003eFor better understanding i\u0026nbsp;will demonstrate the logic on\u0026nbsp;5\u0026nbsp;values between 0\u0026nbsp;and 100\u0026nbsp;and a\u0026nbsp;data type length of\u0026nbsp;5:\u003c/p\u003e\n\u003ctable\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e4\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e9\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e7\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eLooking at\u0026nbsp;the number it\u0026nbsp;is\u0026nbsp;hard to\u0026nbsp;compress them, but when applying a\u0026nbsp;T64 transformation before, it\u0026nbsp;gets a\u0026nbsp;lot easier to\u0026nbsp;compress:\u003c/p\u003e\n\u003ctable\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e9\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e8\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e5\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e4\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e7\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eSo\u0026nbsp;leading zeros in\u0026nbsp;value representation will become zero values, ergo resulting in\u0026nbsp;better compression ratios. Unfortunately T64 cannot be\u0026nbsp;applied to\u0026nbsp;all data types.\u003c/p\u003e\n\u003ch2 id=\"data-types-and-disk-space-consumption\"\u003e\u003ca href=\"#data-types-and-disk-space-consumption\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eData types and disk space consumption\u003c/span\u003e\u003c/a\u003eData types and disk space consumption\u003c/h2\u003e\n\u003cp\u003eSo\u0026nbsp;finally, let\u0026rsquo;s see how much really gets stored on\u0026nbsp;the disk, depending on\u0026nbsp;different data types, codes and compression algorithms:\u003c/p\u003e"},{"type":"blog-media-block","column":"left","resetPaddings":true,"text":"","image":"/assets/blog/articles/DC_screen_Do DataTypes Still Matter-1.png","fullWidth":false},{"type":"blog-yfm-block","column":"left","resetPaddings":true,"text":"\u003cp\u003eWe\u0026nbsp;can see quite the interesting results.\u003c/p\u003e\n\u003cp\u003eWhen using the default compression algorithm, the amount of\u0026nbsp;disk space (and therefore cost and I/O performance) varies quite a\u0026nbsp;lot, going from 96MiB for UInt8 up\u0026nbsp;to\u0026nbsp;380MiB for UInt256.\u003c/p\u003e\n\u003cp\u003eUsing zstd on\u0026nbsp;the other hand leads to\u0026nbsp;a\u0026nbsp;lot smaller variance in\u0026nbsp;sizes, minimum still being around 80MiB for UInt8 but the maximum is\u0026nbsp;only 118MiB for UInt32 (or\u0026nbsp;Decimal3), and even storing the values as\u0026nbsp;string only results in\u0026nbsp;111MiB for unsigned or\u0026nbsp;119MiB for the signed ones.\u003c/p\u003e\n\u003cp\u003eWhen looking at\u0026nbsp;the results from the T64 transformation, the effect is\u0026nbsp;exactly as\u0026nbsp;wished and the variance there goes from a\u0026nbsp;minimum of\u0026nbsp;83.8MiB to\u0026nbsp;a\u0026nbsp;maximum of\u0026nbsp;85.5MiB with nearly no\u0026nbsp;difference between lz4 and zstd.\u003c/p\u003e\n\u003ch3 id=\"no-disk-consumption-difference-that-means-data-types-really-dont-matter-anymore?\"\u003e\u003ca href=\"#no-disk-consumption-difference-that-means-data-types-really-dont-matter-anymore?\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eNo\u0026nbsp;disk consumption difference\u0026hellip; That means data types really don\u0026rsquo;t matter anymore?\u003c/span\u003e\u003c/a\u003eNo\u0026nbsp;disk consumption difference\u0026hellip; That means data types really don\u0026rsquo;t matter anymore?\u003c/h3\u003e\n\u003cp\u003eWhoah! Not so\u0026nbsp;fast with your conclusions there!\u003c/p\u003e\n\u003cp\u003eEven with the results we\u0026nbsp;saw regarding disk space usage, we\u0026rsquo;re not at\u0026nbsp;the end yet.\u003c/p\u003e\n\u003cp\u003eOf\u0026nbsp;course I/O performance is\u0026nbsp;the main bottleneck most of\u0026nbsp;the time, when speaking about general performance of\u0026nbsp;ClickHouse (or\u0026nbsp;other DBMS), but there are more things to\u0026nbsp;consider:\u003c/p\u003e\n\u003ch2 id=\"speed-of-compression-algorithm\"\u003e\u003ca href=\"#speed-of-compression-algorithm\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eSpeed of\u0026nbsp;compression algorithm\u003c/span\u003e\u003c/a\u003eSpeed of\u0026nbsp;compression algorithm\u003c/h2\u003e\n\u003cp\u003eIf\u0026nbsp;all the algorithms were equally fast, there would only be\u0026nbsp;one algorithm to\u0026nbsp;use, right?\u003c/p\u003e\n\u003cp\u003eBut in\u0026nbsp;real world scenarios, the compression algorithm can make a\u0026nbsp;big difference in\u0026nbsp;speed. Especially when inserting new data\u0026hellip; this could have a\u0026nbsp;big impact on\u0026nbsp;how much inserts your application can handle with a\u0026nbsp;given infrastructure.\u003c/p\u003e\n\u003ch2 id=\"memory-usage\"\u003e\u003ca href=\"#memory-usage\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eMemory usage\u003c/span\u003e\u003c/a\u003eMemory usage\u003c/h2\u003e\n\u003cp\u003eEven if\u0026nbsp;different data types take up\u0026nbsp;an\u0026nbsp;equal amount of\u0026nbsp;space on\u0026nbsp;your disks because of\u0026nbsp;compression, when using the data within queries you\u0026rsquo;re not working with compressed data anymore, but ClickHouse has decompressed the data to\u0026nbsp;throw it\u0026nbsp;into the actual calculation logic.\u003c/p\u003e\n\u003cp\u003eWe\u0026nbsp;can already see this in\u0026nbsp;a\u0026nbsp;very simple example.\u003c/p\u003e\n\u003cp\u003eLet\u0026rsquo;s say we\u0026nbsp;need to\u0026nbsp;group by\u0026nbsp;our values within different data types, and want to\u0026nbsp;get the average value of\u0026nbsp;the id\u0026nbsp;column:\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eSELECT u8 AS grp, avg(id) \nFROM dtypes.data_default \nGROUP BY grp \nORDER BY grp\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"45\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-45\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-45\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-45.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003cp\u003eGrouping as\u0026nbsp;well as\u0026nbsp;sorting has to\u0026nbsp;be\u0026nbsp;done on\u0026nbsp;uncompressed data of\u0026nbsp;course, that means the memory usage of\u0026nbsp;this simple query differs quite a\u0026nbsp;lot, depending on\u0026nbsp;the data type.\u003c/p\u003e\n\u003cp\u003e(For simplicity, I\u0026rsquo;ll omit the signed results from now on, as\u0026nbsp;the results are quite redundant to\u0026nbsp;the unsigned).\u003c/p\u003e"},{"type":"blog-media-block","column":"left","resetPaddings":true,"text":"","image":"/assets/blog/articles/DC_screen_Do DataTypes Still Matter-2.png","fullWidth":false},{"type":"blog-yfm-block","column":"left","resetPaddings":true,"text":"\u003cp\u003eSo\u0026nbsp;the data type has a\u0026nbsp;direct impact on\u0026nbsp;the memory usage of\u0026nbsp;queries, which can make a\u0026nbsp;big difference on\u0026nbsp;how many queries you can run in\u0026nbsp;parallel or\u0026nbsp;even if\u0026nbsp;you can get a\u0026nbsp;query to\u0026nbsp;finish in\u0026nbsp;the first place.\u003c/p\u003e\n\u003ch2 id=\"query-speed\"\u003e\u003ca href=\"#query-speed\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eQuery speed\u003c/span\u003e\u003c/a\u003eQuery speed\u003c/h2\u003e\n\u003cp\u003eWhen working with large amounts of\u0026nbsp;data, query speed is\u0026nbsp;mostly bound on\u0026nbsp;I/O performance. But when data is\u0026nbsp;already in\u0026nbsp;memory because of\u0026nbsp;caching for example, the I/O impact isn\u0026rsquo;t as\u0026nbsp;important anymore.\u003c/p\u003e\n\u003cp\u003eInstead other things can take over.\u003c/p\u003e\n\u003cp\u003eIt\u0026nbsp;could make a\u0026nbsp;difference how fast you can copy data within your memory itself, or\u0026nbsp;it\u0026nbsp;could make a\u0026nbsp;difference if\u0026nbsp;some hardware acceleration can be\u0026nbsp;used.\u003c/p\u003e\n\u003cp\u003eMost cores have no\u0026nbsp;problem handling 32\u0026nbsp;bit integer values, but handling 256\u0026nbsp;bit integers might need some special logic within your code. Some very fast sorting algorithms might just work for small data types while others work best only for integer types etc.\u003c/p\u003e\n\u003cp\u003eAnd of\u0026nbsp;course, the decompression and transformation of\u0026nbsp;the data also takes some time.\u003c/p\u003e\n\u003cp\u003eI\u0026nbsp;ran the query from the last section via clickhouse-benchmark on\u0026nbsp;to\u0026nbsp;measure the speed regarding different types and algorithms:\u003c/p\u003e"},{"type":"blog-media-block","column":"left","resetPaddings":true,"text":"","image":"/assets/blog/articles/DC_screen_Do DataTypes Still Matter-3.png","fullWidth":false},{"type":"blog-yfm-block","column":"left","resetPaddings":true,"text":"\u003cp\u003eThe absolute numbers are not that relevant here, only the relation between the types is\u0026nbsp;interesting. As\u0026nbsp;we\u0026nbsp;can see, regarding query speed, data types can have a\u0026nbsp;big impact on\u0026nbsp;query performance.\u003c/p\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca href=\"#conclusion\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eConclusion\u003c/span\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eSo\u0026nbsp;overall our tests and benchmarks confirmed what my\u0026nbsp;gut already thought directly.\u003c/p\u003e\n\u003cp\u003eEven with such a\u0026nbsp;good compression as\u0026nbsp;columns based DBMS (and especially ClickHouse) provide, data types do\u0026nbsp;still matter quite a\u0026nbsp;lot.\u003c/p\u003e\n\u003cp\u003eIt\u0026rsquo;s always worth it\u0026nbsp;to\u0026nbsp;check your data and choose the smallest data type needed, to\u0026nbsp;handle all your data.\u003c/p\u003e\n\u003cp\u003eBut regarding disk space alone, the case might be\u0026nbsp;different.\u003c/p\u003e\n\u003cp\u003eEspecially if\u0026nbsp;you want to\u0026nbsp;store a\u0026nbsp;lot of\u0026nbsp;uncleaned or\u0026nbsp;raw data, you might simply just use Strings for that and use ZSTD as\u0026nbsp;compression.\u003c/p\u003e\n\u003cp\u003eThat way, you have the possibility to\u0026nbsp;see when someone accidentally sends incorrect values as\u0026nbsp;well (like user input instead of\u0026nbsp;numbers).\u003c/p\u003e\n\u003cp\u003eBut once you really want to\u0026nbsp;work with your data in\u0026nbsp;the fastest possible way, you should always invest the time to\u0026nbsp;choose the right types.\u003c/p\u003e\n\u003cp\u003eYour future self will be\u0026nbsp;grateful 🙂.\u003c/p\u003e"}]},{"type":"content-layout-block","background":{"src":"/assets/doublecloud/doublecloud-cover-5.png"},"centered":true,"textContent":{"title":"Start your trial today","buttons":[{"text":"Start free trial","size":"promo","theme":"accent","url":"https://auth.double.cloud/s/signup"},{"text":"Contact us","theme":"pseudo","url":"#contact-us-form"}]}},{"type":"blog-suggest-block","resetPaddings":true,"fullWidth":false}]},"title":"Relevance of data types in the age of column-based compression","noIndex":false,"shareTitle":"Do data types still matter? How column based compression can make data types irrelevant","shareDescription":null,"shareImage":"/assets/blog/articles/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant-sharing.png","pageLocaleId":112,"author":"unknown","metaDescription":"Explore the impact of column-based compression on data types and how it can redefine their significance.","keywords":[],"shareGenTitle":null,"canonicalLink":null,"sharingType":"custom","sharingTheme":"dark","comment":"add fetchProperty prop to header or bg","shareImageUrl":null,"pageRegionId":null,"service":null,"solution":null,"locales":[{"locale":"ru","publishedVersionId":null},{"locale":"en","publishedVersionId":2178}],"regions":[],"pageRegions":[]},"post":{"url":"","id":56,"name":"do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant","isPinned":false,"blogPostId":56,"image":"/assets/blog/articles/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant-small-cover.png","readingTime":10,"date":"2023-02-01T00:00:00Z","likes":0,"hasUserLike":false,"services":[],"slug":"","authors":[],"locale":{"lang":"en"},"textTitle":"Do data types still matter? How column based compression can make data types irrelevant","htmlTitle":"Do\u0026nbsp;data types still matter? How column based compression can make data types irrelevant","title":"Do data types still matter? How column based compression can make data types irrelevant","tags":[{"icon":null,"slug":"insights","name":"Insights","createdAt":"","updatedAt":"","count":0}],"metaTitle":"Do data types still matter? How column based compression can make data types irrelevant","description":"\u003cp\u003eWritten By: Stefan Kaeser, DoubleCloud Solution Architect\u003c/p\u003e","content":"\u003cp\u003eIn\u0026nbsp;this article, we\u0026rsquo;ll talk about:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#what-are-data-types?\"\u003eWhat are data types?\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#how-does-compression-help-with-storing-data?\"\u003eHow does compression help with storing data?\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#dont-explain-basics-to-me-i-want-to-see-real-data\"\u003eDon\u0026rsquo;t explain basics to\u0026nbsp;me\u0026nbsp;I\u0026nbsp;want to\u0026nbsp;see real data\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#test-setup\"\u003eTest setup\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#first-result\"\u003eFirst result\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#compression-algorithms-and-codecs\"\u003eCompression algorithms and codecs\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#the-t64-codec\"\u003eThe T64 codec\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#data-types-and-disk-space-consumption\"\u003eData types and disk space consumption\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#no-disk-consumption-difference-that-means-data-types-really-dont-matter-anymore\"\u003eNo\u0026nbsp;disk consumption difference that means data types really don\u0026rsquo;t matter anymore\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#speed-of-compression-algorithm\"\u003eSpeed of\u0026nbsp;compression algorithm\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#memory-usage\"\u003eMemory usage\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#query-speed\"\u003eQuery speed\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#conclusion\"\u003eConclusion\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI\u0026rsquo;ve been working with databases for over twenty years now and one of\u0026nbsp;the first things I\u0026nbsp;always do\u0026nbsp;when optimizing performance is\u0026nbsp;to\u0026nbsp;take a\u0026nbsp;look at\u0026nbsp;the used data types.\u003c/p\u003e\n\u003cp\u003eIt\u0026nbsp;may not sound like much if\u0026nbsp;a\u0026nbsp;single number takes up\u0026nbsp;1,2,4 or\u0026nbsp;8\u0026nbsp;bytes of\u0026nbsp;storage, but if\u0026nbsp;you want to\u0026nbsp;store billions of\u0026nbsp;numbers, a\u0026nbsp;factor of\u0026nbsp;8\u0026nbsp;will have a\u0026nbsp;big impact on\u0026nbsp;the final space you need\u0026hellip; and therefore have a\u0026nbsp;direct impact on\u0026nbsp;your database cost and also speed of\u0026nbsp;queries.\u003c/p\u003e\n\u003cp\u003eLately, I\u0026nbsp;had a\u0026nbsp;short discussion with a\u0026nbsp;potential customer.\u003c/p\u003e\n\u003cp\u003eThey were asking if\u0026nbsp;choosing the smallest data type is\u0026nbsp;still important when working with ClickHouse?\u003c/p\u003e\n\u003cp\u003eTheir reasoning behind this was that ClickHouse, as\u0026nbsp;well as\u0026nbsp;other column based DBMS, compress not rows, but single columns, and therefore the compression algorithm should be\u0026nbsp;able to\u0026nbsp;compress the numbers, no\u0026nbsp;matter if\u0026nbsp;we\u0026nbsp;were choosing the smallest possible type, or\u0026nbsp;just use 64-Bit integer all the time.\u003c/p\u003e\n\u003cp\u003eI\u0026nbsp;instantly said yes, as\u0026nbsp;even in\u0026nbsp;column based DBMS data is\u0026nbsp;not always compressed, but still\u0026hellip; it\u0026nbsp;stayed in\u0026nbsp;my\u0026nbsp;mind to\u0026nbsp;evaluate in\u0026nbsp;more detail, if\u0026nbsp;data types still matter in\u0026nbsp;a\u0026nbsp;column based context.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;give away the TL;DR: Yes, data types still matter, but not if\u0026nbsp;you\u0026rsquo;re only focusing on\u0026nbsp;disk usage.\u003c/p\u003e\n\u003ch2 id=\"what-are-data-types?\"\u003e\u003ca href=\"#what-are-data-types?\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eWhat are data types?\u003c/span\u003e\u003c/a\u003eWhat are data types?\u003c/h2\u003e\n\u003cp\u003eBefore we\u0026nbsp;are going into the details and benchmarking results, I\u0026nbsp;want to\u0026nbsp;give a\u0026nbsp;short recap about what data types are.\u003c/p\u003e\n\u003cp\u003eBasically data types describe the way to\u0026nbsp;represent data within a\u0026nbsp;DBMS (in\u0026nbsp;our case).\u003c/p\u003e\n\u003cp\u003eIf\u0026nbsp;you want to\u0026nbsp;store for example, the number 57, you have multiple possibilities to\u0026nbsp;store this number in\u0026nbsp;ClickHouse.\u003c/p\u003e\n\u003cp\u003eYou can use some unsigned integer type like UInt8 or\u0026nbsp;UInt64, other possibilities are signed integers like Int16 or\u0026nbsp;Int32.\u003c/p\u003e\n\u003cp\u003eMaybe not instantly in\u0026nbsp;your focus but also possible would be\u0026nbsp;the String type or\u0026nbsp;to\u0026nbsp;make use of\u0026nbsp;the decimal type.\u003c/p\u003e\n\u003cp\u003eThe main difference between all these types is, how big the numbers can grow and how much space a\u0026nbsp;single number takes up.\u003c/p\u003e\n\u003cp\u003eUInt8 for example means you can store unsigned integers with a\u0026nbsp;maximum of\u0026nbsp;2⁸ (256). Each number takes up\u0026nbsp;8\u0026nbsp;bits (hence the name UInt8) or\u0026nbsp;1\u0026nbsp;byte of\u0026nbsp;space.\u003c/p\u003e\n\u003cp\u003eInt32 on\u0026nbsp;the other hand allows you to\u0026nbsp;store signed numbers between -2\u0026sup3;\u0026sup1; and 2\u0026sup3;\u0026sup1;-1, but each number you store takes up\u0026nbsp;32\u0026nbsp;bits or\u0026nbsp;4\u0026nbsp;bytes of\u0026nbsp;space.\u003c/p\u003e\n\u003cp\u003eSo\u0026nbsp;if\u0026nbsp;you want to\u0026nbsp;store our example number 57, when storing that number into a\u0026nbsp;Int32 column you are actually storing the 57\u0026nbsp;in\u0026nbsp;one byte and a\u0026nbsp;lot of\u0026nbsp;additional zeros to\u0026nbsp;fill up\u0026nbsp;the other 3\u0026nbsp;bytes.\u003c/p\u003e\n\u003cp\u003eIf\u0026nbsp;you want to\u0026nbsp;store the number 57\u0026nbsp;in\u0026nbsp;a\u0026nbsp;string column, then the single digits would be\u0026nbsp;converted into their ASCII representation and the total length of\u0026nbsp;the string would be\u0026nbsp;added to\u0026nbsp;the storage, hence we\u0026nbsp;would store the information string of\u0026nbsp;length 2\u0026nbsp;and two bytes representing the digit 5\u0026nbsp;and the digit 7.\u003c/p\u003e\n\u003cp\u003eThis would make up\u0026nbsp;a\u0026nbsp;total of\u0026nbsp;at\u0026nbsp;least 3\u0026nbsp;bytes (assuming the length is\u0026nbsp;stored in\u0026nbsp;one byte) used for storing the number 57\u0026nbsp;in\u0026nbsp;a\u0026nbsp;String field.\u003c/p\u003e\n\u003cp\u003eSo\u0026nbsp;no\u0026nbsp;matter if\u0026nbsp;we\u0026nbsp;add additional zeros to\u0026nbsp;the data or\u0026nbsp;always adding the length of\u0026nbsp;the number to\u0026nbsp;it, when using bigger data types than needed, we\u0026nbsp;are adding redundant data.\u003cbr /\u003e\nThis is\u0026nbsp;where compression comes into play.\u003c/p\u003e\n\u003ch2 id=\"how-does-compression-help-with-storing-data?\"\u003e\u003ca href=\"#how-does-compression-help-with-storing-data?\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eHow does compression help with storing data?\u003c/span\u003e\u003c/a\u003eHow does compression help with storing data?\u003c/h2\u003e\n\u003cp\u003eAs\u0026nbsp;we\u0026rsquo;ve seen above, choosing the right data type can have a\u0026nbsp;big impact on\u0026nbsp;the amount of\u0026nbsp;data we\u0026nbsp;need to\u0026nbsp;store on\u0026nbsp;disk, even for a\u0026nbsp;single number.\u003c/p\u003e\n\u003cp\u003eBut what if\u0026nbsp;we\u0026nbsp;don\u0026rsquo;t want to\u0026nbsp;only store single numbers\u0026hellip; but thousands, or\u0026nbsp;millions or\u0026nbsp;even trillions of\u0026nbsp;numbers?\u003c/p\u003e\n\u003cp\u003eIf\u0026nbsp;we\u0026nbsp;want to\u0026nbsp;store them directly, the impact of\u0026nbsp;the data type is\u0026nbsp;exactly the same as\u0026nbsp;if\u0026nbsp;storing a\u0026nbsp;single number.\u003c/p\u003e\n\u003cp\u003eIf\u0026nbsp;one number takes up\u0026nbsp;3\u0026nbsp;bytes then one million numbers take up\u0026nbsp;3\u0026nbsp;million bytes, and if\u0026nbsp;a\u0026nbsp;single number takes up\u0026nbsp;only 1\u0026nbsp;byte then a\u0026nbsp;million number takes up\u0026nbsp;only 1\u0026nbsp;million bytes.\u003c/p\u003e\n\u003cp\u003eThat\u0026rsquo;s where compression kicks in.\u003c/p\u003e\n\u003cp\u003eI\u0026nbsp;won\u0026rsquo;t go\u0026nbsp;into details about how compression works, as\u0026nbsp;this could fill several books (which are already written as\u0026nbsp;well for some parts), but I\u0026nbsp;just want to\u0026nbsp;explain some generics.\u003c/p\u003e\n\u003cp\u003eCompression tries to\u0026nbsp;remove the amount of\u0026nbsp;redundancy of\u0026nbsp;data.\u003c/p\u003e\n\u003cp\u003eFor example if\u0026nbsp;you have a\u0026nbsp;list of\u0026nbsp;numbers: 5,5,5,5,5,5,5,5,8,8,8,9,1 you could write it\u0026nbsp;in\u0026nbsp;a\u0026nbsp;compressed way: 8\u003cem\u003e5,3\u003c/em\u003e8,9,1\u003c/p\u003e\n\u003cp\u003eAs\u0026nbsp;we\u0026nbsp;can see in\u0026nbsp;that simple example, the big amount of\u0026nbsp;fives could be\u0026nbsp;compressed quite well. The original list took 13\u0026nbsp;characters (without commas), the new one only 8.\u003c/p\u003e\n\u003cp\u003eBut what about different data types in\u0026nbsp;this regard?\u003c/p\u003e\n\u003cp\u003eWhen choosing a\u0026nbsp;non optimal data type, you\u0026rsquo;re basically adding additional space that a\u0026nbsp;single value would take up.\u003c/p\u003e\n\u003cp\u003eBut as\u0026nbsp;seen before, this space is\u0026nbsp;mostly filled with zeros, so\u0026nbsp;if\u0026nbsp;you have millions of\u0026nbsp;values, you\u0026rsquo;re actually adding multiple millions of\u0026nbsp;zeros to\u0026nbsp;your data, which means you are adding a\u0026nbsp;lot of\u0026nbsp;redundant data, and compression would remove redundancy.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;go\u0026nbsp;back to\u0026nbsp;our example, let\u0026rsquo;s say in\u0026nbsp;our list of\u0026nbsp;numbers each number takes up\u0026nbsp;3\u0026nbsp;bytes, then the list would look as\u0026nbsp;follows:\u003c/p\u003e\n\u003cp\u003e005,005,005,005,005,005,005,005,008,008,008,009,001 which would result in\u0026nbsp;39\u0026nbsp;characters to\u0026nbsp;store.\u003c/p\u003e\n\u003cp\u003eBut the compressed list would look like this: 8\u003cem\u003e005,3\u003c/em\u003e008,009,001 or\u0026nbsp;16\u0026nbsp;characters.\u003c/p\u003e\n\u003cp\u003eSo\u0026nbsp;even as\u0026nbsp;the raw data takes up\u0026nbsp;3\u0026nbsp;times more space as\u0026nbsp;we\u0026nbsp;are choosing a\u0026nbsp;different data type, the compressed data only takes up\u0026nbsp;2\u0026nbsp;times more.\u003c/p\u003e\n\u003ch2 id=\"dont-explain-basics-to-me-i-want-to-see-real-data\"\u003e\u003ca href=\"#dont-explain-basics-to-me-i-want-to-see-real-data\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eDon\u0026rsquo;t explain basics to\u0026nbsp;me\u0026nbsp;I\u0026nbsp;want to\u0026nbsp;see real data\u003c/span\u003e\u003c/a\u003eDon\u0026rsquo;t explain basics to\u0026nbsp;me\u0026nbsp;I\u0026nbsp;want to\u0026nbsp;see real data\u003c/h2\u003e\n\u003cp\u003eAs\u0026nbsp;described above, choosing bigger data types than needed mainly adds redundant data to\u0026nbsp;the uncompressed blocks, but when writing data to\u0026nbsp;disk, the redundancy should be\u0026nbsp;eliminated again thanks to\u0026nbsp;compression.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;test this, we\u0026nbsp;use a\u0026nbsp;simple test setup.\u003c/p\u003e\n\u003cp\u003eWe\u0026rsquo;ll store 100\u0026nbsp;million rows, containing values between 0\u0026nbsp;and 100\u0026nbsp;in\u0026nbsp;different data types.\u003c/p\u003e\n\u003cp\u003eThen I\u0026rsquo;ll look at\u0026nbsp;the amount of\u0026nbsp;space these take up\u0026nbsp;on\u0026nbsp;disk, and later on\u0026nbsp;we\u0026rsquo;ll do\u0026nbsp;some simple queries to\u0026nbsp;see if\u0026nbsp;different data types have an\u0026nbsp;impact on\u0026nbsp;performance.\u003c/p\u003e\n\u003ch2 id=\"test-setup\"\u003e\u003ca href=\"#test-setup\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eTest setup\u003c/span\u003e\u003c/a\u003eTest setup\u003c/h2\u003e\n\u003cp\u003eFirst we\u0026nbsp;define our test table choosing clickhouse default compression and a\u0026nbsp;lot of\u0026nbsp;different data types to\u0026nbsp;store the numbers 0\u0026nbsp;\u0026mdash; 100\u0026nbsp;in\u0026nbsp;it:\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eCREATE TABLE dtypes.data_default (\n  id UInt32,\n  u8 UInt8,\n  u16 UInt16,\n  u32 UInt32,\n  u64 UInt64,\n  u256 UInt256,\n  udec3 Decimal(3,0),\n  udec30 Decimal(30,0),\n  ulstr LowCardinality(String),\n  ustr String,\n\n  i8 Int8,\n  i16 Int16,\n  i32 Int32,\n  i64 Int64,\n  i256 Int256,\n\n  idec3 Decimal(3,0),\n  idec30 Decimal(30,0),\n  ilstr LowCardinality(String),\n  istr String\n) engine=MergeTree\norder by id;\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"132\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-132\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-132\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-132.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003cp\u003eTo\u0026nbsp;check if\u0026nbsp;there is\u0026nbsp;a\u0026nbsp;difference when storing signed values, I\u0026nbsp;also added the same columns again but prefixed with an\u0026nbsp;i.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;get the signed values but keep the data distribution, we\u0026rsquo;ll subtract 50\u0026nbsp;from the unsigned value, resulting in\u0026nbsp;values from -50 to\u0026nbsp;50.\u003c/p\u003e\n\u003cp\u003eNow we\u0026rsquo;ll fill the table with 100\u0026nbsp;million rows, generating random numbers between 0\u0026nbsp;and 100. We\u0026nbsp;explicitly want to\u0026nbsp;store random values, to\u0026nbsp;make sure our dataset itself compresses quite badly, as\u0026nbsp;we\u0026nbsp;only want to\u0026nbsp;see if\u0026nbsp;the redundancy of\u0026nbsp;the data type will be\u0026nbsp;compressed.\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eINSERT INTO dtypes.data_default\nSELECT number, rand() % 100 AS u, u, u, u, u, u, u, \n  toString(u), toString(u), \n  rand() % 100 - 50 AS i, i, i, i, i, \n  i, i, toString(i), toString(i)\nFROM numbers(100000000);\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"142\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-142\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-142\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-142.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003cp\u003eI\u0026nbsp;manually ran an\u0026nbsp;OPTIMIZE TABLE data_default FINAL to\u0026nbsp;make sure the data is\u0026nbsp;in\u0026nbsp;as\u0026nbsp;less parts possible, to\u0026nbsp;see the strongest effect of\u0026nbsp;the compression\u003c/p\u003e\n\u003ch2 id=\"first-result\"\u003e\u003ca href=\"#first-result\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eFirst result\u003c/span\u003e\u003c/a\u003eFirst result\u003c/h2\u003e\n\u003cp\u003eSo\u0026nbsp;how much space does each data type now take up\u0026nbsp;on\u0026nbsp;disk?\u003c/p\u003e\n\u003cp\u003eFortunately, ClickHouse collects a\u0026nbsp;lot of\u0026nbsp;statistics in\u0026nbsp;its system tables, so\u0026nbsp;we\u0026nbsp;can easily get the wanted data by\u0026nbsp;running a\u0026nbsp;simple query:\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eSELECT name, substring(type, 1, 50) as type, \n  formatReadableSize(data_compressed_bytes) AS comp,\n  formatReadableSize(data_uncompressed_bytes) AS uncomp,\n  round(data_uncompressed_bytes / data_compressed_bytes, 2) AS \n    ratio\nFROM system.columns\nWHERE database ='dtypes' AND table = 'data_default'\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"155\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-155\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-155\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-155.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003cp\u003eAnd this is\u0026nbsp;the result:\u003c/p\u003e\n\u003ctable\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003ename\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003etype\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003ecomp\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003euncomp\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003eratio\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eid\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e383.12 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.78 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.37 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu16\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt16\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e146.84 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e190.73 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.3\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e279.67 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.36\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu64\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt64\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e285.15 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e762.94 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e2.68\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu256\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt256\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e380.01 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e2.98 GiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e8.03\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eudec3\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eDecimal (3, 0)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e279.67 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.36\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eudec30\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eDecimal (30, 0)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e286.53 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.49 GiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5.33\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eulstr\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eLowCardinality (String)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.89 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.56 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eustr\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eString\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e182.86 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e276.57 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.51\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.78 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.37 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei16\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt16\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e155.06 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e190.73 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.23\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e281.05 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.36\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei64\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt64\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e284.83 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e762.94 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e2.68\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei256\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt256\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e379.24 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e2.98 GiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e8.05\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eidec3\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eDecimal (3, 0)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e281.05 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.36\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eidec30\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eDecimal (30, 0)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e285.77 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.49 GiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5.34\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eilstr\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eLowCardinality (String)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.89 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.56 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eistr\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eString\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e189.39 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e315.67 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.67\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eAs\u0026nbsp;you can see, the results resemble the basic assumption we\u0026nbsp;had, that the bigger the data type is, the better the compression ratio becomes, or\u0026nbsp;simply speaking, if\u0026nbsp;a\u0026nbsp;bigger data type in\u0026nbsp;theory takes up\u0026nbsp;double the space than a\u0026nbsp;smaller data type, it\u0026nbsp;doesn\u0026rsquo;t mean that after compression the data still takes up\u0026nbsp;double the space on\u0026nbsp;disk.\u003c/p\u003e\n\u003cp\u003eBut we\u0026nbsp;also see that choosing the smallest data type possible (UInt8) takes up\u0026nbsp;95MiB while the biggest one (UInt256) takes 380MiB, so\u0026nbsp;still a\u0026nbsp;factor of\u0026nbsp;4\u0026nbsp;for disk usage, which does still matter a\u0026nbsp;lot.\u003c/p\u003e\n\u003ch2 id=\"compression-algorithms-and-codecs\"\u003e\u003ca href=\"#compression-algorithms-and-codecs\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eCompression algorithms and codecs\u003c/span\u003e\u003c/a\u003eCompression algorithms and codecs\u003c/h2\u003e\n\u003cp\u003eAs\u0026nbsp;disk I/O is\u0026nbsp;the most important factor for speed in\u0026nbsp;ClickHouse and disk space being an\u0026nbsp;important factor for cost as\u0026nbsp;well, we\u0026nbsp;could already finish here and conclude that data types still matter and all would be\u0026nbsp;fine.\u003c/p\u003e\n\u003cp\u003eBut ClickHouse has such a\u0026nbsp;wide variety of\u0026nbsp;possibilities for defining columns, using special compression algorithms and codecs for optimizing the compression ratio.\u003c/p\u003e\n\u003cp\u003eThe default algorithm used is\u0026nbsp;LZ4, which is\u0026nbsp;fast and has a\u0026nbsp;good compression ratio overall. But using zstd can lead to\u0026nbsp;a\u0026nbsp;better compression with only a\u0026nbsp;little more impact on\u0026nbsp;the CPU.\u003c/p\u003e\n\u003cp\u003eThere are also some special codecs which can be\u0026nbsp;applied to\u0026nbsp;make data more compressible like T64.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;change a\u0026nbsp;codec in\u0026nbsp;ClickHouse you just need to\u0026nbsp;change the definition of\u0026nbsp;the column you want to\u0026nbsp;apply a\u0026nbsp;different codec on:\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eCREATE TABLE dtypes.data_t64_zstd (\nid UInt32,\nu8 UInt8  CODEC(T64, ZSTD),\nu16 UInt16  CODEC(T64, ZSTD),\n…\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"727\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-727\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-727\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-727.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"the-t64-codec\"\u003e\u003ca href=\"#the-t64-codec\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eThe T64 codec\u003c/span\u003e\u003c/a\u003eThe T64 codec\u003c/h2\u003e\n\u003cp\u003eI\u0026nbsp;want to\u0026nbsp;give a\u0026nbsp;short description of\u0026nbsp;the T64 codec, as\u0026nbsp;it\u0026nbsp;can have a\u0026nbsp;strong impact on\u0026nbsp;the compression ratio in\u0026nbsp;the case of\u0026nbsp;using bigger datatypes than needed.\u003c/p\u003e\n\u003cp\u003eThe way it\u0026nbsp;works is\u0026nbsp;that it\u0026nbsp;uses 64\u0026nbsp;values and writes them in\u0026nbsp;a\u0026nbsp;matrix, then it\u0026nbsp;transposes this matrix and the compression algorithm gets the transposed matrix to\u0026nbsp;compress it.\u003c/p\u003e\n\u003cp\u003eFor better understanding i\u0026nbsp;will demonstrate the logic on\u0026nbsp;5\u0026nbsp;values between 0\u0026nbsp;and 100\u0026nbsp;and a\u0026nbsp;data type length of\u0026nbsp;5:\u003c/p\u003e\n\u003ctable\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e4\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e9\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e7\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eLooking at\u0026nbsp;the number it\u0026nbsp;is\u0026nbsp;hard to\u0026nbsp;compress them, but when applying a\u0026nbsp;T64 transformation before, it\u0026nbsp;gets a\u0026nbsp;lot easier to\u0026nbsp;compress:\u003c/p\u003e\n\u003ctable\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e9\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e8\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e5\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e4\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e7\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eSo\u0026nbsp;leading zeros in\u0026nbsp;value representation will become zero values, ergo resulting in\u0026nbsp;better compression ratios. Unfortunately T64 cannot be\u0026nbsp;applied to\u0026nbsp;all data types.\u003c/p\u003e\n\u003ch2 id=\"data-types-and-disk-space-consumption\"\u003e\u003ca href=\"#data-types-and-disk-space-consumption\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eData types and disk space consumption\u003c/span\u003e\u003c/a\u003eData types and disk space consumption\u003c/h2\u003e\n\u003cp\u003eSo\u0026nbsp;finally, let\u0026rsquo;s see how much really gets stored on\u0026nbsp;the disk, depending on\u0026nbsp;different data types, codes and compression algorithms:\u003c/p\u003e\n\n\u003cp\u003eWe\u0026nbsp;can see quite the interesting results.\u003c/p\u003e\n\u003cp\u003eWhen using the default compression algorithm, the amount of\u0026nbsp;disk space (and therefore cost and I/O performance) varies quite a\u0026nbsp;lot, going from 96MiB for UInt8 up\u0026nbsp;to\u0026nbsp;380MiB for UInt256.\u003c/p\u003e\n\u003cp\u003eUsing zstd on\u0026nbsp;the other hand leads to\u0026nbsp;a\u0026nbsp;lot smaller variance in\u0026nbsp;sizes, minimum still being around 80MiB for UInt8 but the maximum is\u0026nbsp;only 118MiB for UInt32 (or\u0026nbsp;Decimal3), and even storing the values as\u0026nbsp;string only results in\u0026nbsp;111MiB for unsigned or\u0026nbsp;119MiB for the signed ones.\u003c/p\u003e\n\u003cp\u003eWhen looking at\u0026nbsp;the results from the T64 transformation, the effect is\u0026nbsp;exactly as\u0026nbsp;wished and the variance there goes from a\u0026nbsp;minimum of\u0026nbsp;83.8MiB to\u0026nbsp;a\u0026nbsp;maximum of\u0026nbsp;85.5MiB with nearly no\u0026nbsp;difference between lz4 and zstd.\u003c/p\u003e\n\u003ch3 id=\"no-disk-consumption-difference-that-means-data-types-really-dont-matter-anymore?\"\u003e\u003ca href=\"#no-disk-consumption-difference-that-means-data-types-really-dont-matter-anymore?\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eNo\u0026nbsp;disk consumption difference\u0026hellip; That means data types really don\u0026rsquo;t matter anymore?\u003c/span\u003e\u003c/a\u003eNo\u0026nbsp;disk consumption difference\u0026hellip; That means data types really don\u0026rsquo;t matter anymore?\u003c/h3\u003e\n\u003cp\u003eWhoah! Not so\u0026nbsp;fast with your conclusions there!\u003c/p\u003e\n\u003cp\u003eEven with the results we\u0026nbsp;saw regarding disk space usage, we\u0026rsquo;re not at\u0026nbsp;the end yet.\u003c/p\u003e\n\u003cp\u003eOf\u0026nbsp;course I/O performance is\u0026nbsp;the main bottleneck most of\u0026nbsp;the time, when speaking about general performance of\u0026nbsp;ClickHouse (or\u0026nbsp;other DBMS), but there are more things to\u0026nbsp;consider:\u003c/p\u003e\n\u003ch2 id=\"speed-of-compression-algorithm\"\u003e\u003ca href=\"#speed-of-compression-algorithm\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eSpeed of\u0026nbsp;compression algorithm\u003c/span\u003e\u003c/a\u003eSpeed of\u0026nbsp;compression algorithm\u003c/h2\u003e\n\u003cp\u003eIf\u0026nbsp;all the algorithms were equally fast, there would only be\u0026nbsp;one algorithm to\u0026nbsp;use, right?\u003c/p\u003e\n\u003cp\u003eBut in\u0026nbsp;real world scenarios, the compression algorithm can make a\u0026nbsp;big difference in\u0026nbsp;speed. Especially when inserting new data\u0026hellip; this could have a\u0026nbsp;big impact on\u0026nbsp;how much inserts your application can handle with a\u0026nbsp;given infrastructure.\u003c/p\u003e\n\u003ch2 id=\"memory-usage\"\u003e\u003ca href=\"#memory-usage\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eMemory usage\u003c/span\u003e\u003c/a\u003eMemory usage\u003c/h2\u003e\n\u003cp\u003eEven if\u0026nbsp;different data types take up\u0026nbsp;an\u0026nbsp;equal amount of\u0026nbsp;space on\u0026nbsp;your disks because of\u0026nbsp;compression, when using the data within queries you\u0026rsquo;re not working with compressed data anymore, but ClickHouse has decompressed the data to\u0026nbsp;throw it\u0026nbsp;into the actual calculation logic.\u003c/p\u003e\n\u003cp\u003eWe\u0026nbsp;can already see this in\u0026nbsp;a\u0026nbsp;very simple example.\u003c/p\u003e\n\u003cp\u003eLet\u0026rsquo;s say we\u0026nbsp;need to\u0026nbsp;group by\u0026nbsp;our values within different data types, and want to\u0026nbsp;get the average value of\u0026nbsp;the id\u0026nbsp;column:\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eSELECT u8 AS grp, avg(id) \nFROM dtypes.data_default \nGROUP BY grp \nORDER BY grp\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"45\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-45\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-45\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-45.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003cp\u003eGrouping as\u0026nbsp;well as\u0026nbsp;sorting has to\u0026nbsp;be\u0026nbsp;done on\u0026nbsp;uncompressed data of\u0026nbsp;course, that means the memory usage of\u0026nbsp;this simple query differs quite a\u0026nbsp;lot, depending on\u0026nbsp;the data type.\u003c/p\u003e\n\u003cp\u003e(For simplicity, I\u0026rsquo;ll omit the signed results from now on, as\u0026nbsp;the results are quite redundant to\u0026nbsp;the unsigned).\u003c/p\u003e\n\n\u003cp\u003eSo\u0026nbsp;the data type has a\u0026nbsp;direct impact on\u0026nbsp;the memory usage of\u0026nbsp;queries, which can make a\u0026nbsp;big difference on\u0026nbsp;how many queries you can run in\u0026nbsp;parallel or\u0026nbsp;even if\u0026nbsp;you can get a\u0026nbsp;query to\u0026nbsp;finish in\u0026nbsp;the first place.\u003c/p\u003e\n\u003ch2 id=\"query-speed\"\u003e\u003ca href=\"#query-speed\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eQuery speed\u003c/span\u003e\u003c/a\u003eQuery speed\u003c/h2\u003e\n\u003cp\u003eWhen working with large amounts of\u0026nbsp;data, query speed is\u0026nbsp;mostly bound on\u0026nbsp;I/O performance. But when data is\u0026nbsp;already in\u0026nbsp;memory because of\u0026nbsp;caching for example, the I/O impact isn\u0026rsquo;t as\u0026nbsp;important anymore.\u003c/p\u003e\n\u003cp\u003eInstead other things can take over.\u003c/p\u003e\n\u003cp\u003eIt\u0026nbsp;could make a\u0026nbsp;difference how fast you can copy data within your memory itself, or\u0026nbsp;it\u0026nbsp;could make a\u0026nbsp;difference if\u0026nbsp;some hardware acceleration can be\u0026nbsp;used.\u003c/p\u003e\n\u003cp\u003eMost cores have no\u0026nbsp;problem handling 32\u0026nbsp;bit integer values, but handling 256\u0026nbsp;bit integers might need some special logic within your code. Some very fast sorting algorithms might just work for small data types while others work best only for integer types etc.\u003c/p\u003e\n\u003cp\u003eAnd of\u0026nbsp;course, the decompression and transformation of\u0026nbsp;the data also takes some time.\u003c/p\u003e\n\u003cp\u003eI\u0026nbsp;ran the query from the last section via clickhouse-benchmark on\u0026nbsp;to\u0026nbsp;measure the speed regarding different types and algorithms:\u003c/p\u003e\n\n\u003cp\u003eThe absolute numbers are not that relevant here, only the relation between the types is\u0026nbsp;interesting. As\u0026nbsp;we\u0026nbsp;can see, regarding query speed, data types can have a\u0026nbsp;big impact on\u0026nbsp;query performance.\u003c/p\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca href=\"#conclusion\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eConclusion\u003c/span\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eSo\u0026nbsp;overall our tests and benchmarks confirmed what my\u0026nbsp;gut already thought directly.\u003c/p\u003e\n\u003cp\u003eEven with such a\u0026nbsp;good compression as\u0026nbsp;columns based DBMS (and especially ClickHouse) provide, data types do\u0026nbsp;still matter quite a\u0026nbsp;lot.\u003c/p\u003e\n\u003cp\u003eIt\u0026rsquo;s always worth it\u0026nbsp;to\u0026nbsp;check your data and choose the smallest data type needed, to\u0026nbsp;handle all your data.\u003c/p\u003e\n\u003cp\u003eBut regarding disk space alone, the case might be\u0026nbsp;different.\u003c/p\u003e\n\u003cp\u003eEspecially if\u0026nbsp;you want to\u0026nbsp;store a\u0026nbsp;lot of\u0026nbsp;uncleaned or\u0026nbsp;raw data, you might simply just use Strings for that and use ZSTD as\u0026nbsp;compression.\u003c/p\u003e\n\u003cp\u003eThat way, you have the possibility to\u0026nbsp;see when someone accidentally sends incorrect values as\u0026nbsp;well (like user input instead of\u0026nbsp;numbers).\u003c/p\u003e\n\u003cp\u003eBut once you really want to\u0026nbsp;work with your data in\u0026nbsp;the fastest possible way, you should always invest the time to\u0026nbsp;choose the right types.\u003c/p\u003e\n\u003cp\u003eYour future self will be\u0026nbsp;grateful 🙂.\u003c/p\u003e\n"},"suggestedPosts":[{"url":"/blog/posts/2023/01/break-free-from-vendor-lock-in-with-open-source-tech","id":53,"name":"break-free-from-vendor-lock-in-with-open-source-tech","date":"2023-01-27T00:00:00Z","description":"","readingTime":10,"image":"/assets/blog/articles/break-free-from-vendor-lock-in-with-open-source-tech-small-cover.png","blogPostId":53,"likes":0,"hasUserLike":false,"slug":"","title":"Break free from vendor lock-in with open source tech","authors":[],"tags":[],"locale":{"lang":"en"},"textTitle":"Break free from vendor lock-in with open source tech","htmlTitle":"Break free from vendor lock-in with open source tech"},{"url":"/blog/posts/2023/01/the-ad-sectors-next-frontier-data-clean-rooms","id":54,"name":"the-ad-sectors-next-frontier-data-clean-rooms","date":"2023-01-27T00:00:00Z","description":"","readingTime":10,"image":"/assets/blog/articles/the-ad-sector’s-next-frontier-data-clean-rooms-small-cover.png","blogPostId":54,"likes":0,"hasUserLike":false,"slug":"","title":"The Ad sector’s next frontier: Data clean rooms","authors":[],"tags":[],"locale":{"lang":"en"},"textTitle":"The Ad sector’s next frontier: Data clean rooms","htmlTitle":"The Ad sector’s next frontier: Data clean rooms"},{"url":"/blog/posts/2023/01/etl-or-elt-do-you-know-the-difference","id":55,"name":"etl-or-elt-do-you-know-the-difference","date":"2023-01-27T00:00:00Z","description":"","readingTime":15,"image":"/assets/blog/articles/etl-vs-elt-small-cover.jpg","blogPostId":55,"likes":0,"hasUserLike":false,"slug":"","title":"ETL vs ELT: Choosing the right approach for your data integration needs","authors":[],"tags":[],"locale":{"lang":"en"},"textTitle":"ETL vs ELT: Choosing the right approach for your data integration needs","htmlTitle":"ETL vs ELT: Choosing the right approach for your data integration needs"}]}},"navigationData":{"newMenu":true,"header":{"leftItems":[{"text":"Why DoubleCloud","type":"dc-dropdown","data":{"view":"list","groups":[{"items":[{"text":"Performance","url":"/performance-boost/","description":"Get the best performance with the highest ROI"},{"text":"Security","url":"/security/","description":"Keep your data protected and maintain compliance"},{"text":"DoubleCloud vs. other solutions","url":"/comparison/","description":"Learn how DoubleCloud’s products compare to other solutions"},{"text":"Customer stories","url":"/resources/case-studies/","description":"See our solutions in action"}]},{"image":{"src":"/assets/doublecloud/menu-bar/menu-banner-dc-results.png.webp","style":{"width":300,"height":300}},"text":"\u003ca href='/performance-boost/' target='_self'\u003eGet more and spend less with DoubleCloud  →\u003c/a\u003e"}]}},{"text":"Products","type":"dc-dropdown","metaSchema":{"@graph":[{"@type":"SoftwareApplication","sameAs":["https://twitter.com/getdoublecloud","https://www.youtube.com/@doublecloud2499","https://www.linkedin.com/company/doublecloudplatform/","https://www.facebook.com/GetDoubleCloud/"]},{"@context":"https://schema.org","@type":"Organization","foundingDate":2022,"contactPoint":{"@type":"ContactPoint","contactType":"customer support","telephone":"+1 302-658-7581","email":"info@double.cloud"},"sameAs":["https://twitter.com/getdoublecloud","https://www.youtube.com/@doublecloud2499","https://www.linkedin.com/company/doublecloudplatform/","https://www.facebook.com/GetDoubleCloud/"]}]},"data":{"items":[{"text":"Managed Service for ClickHouse®","url":"/services/managed-clickhouse/","icon":"/assets/icons/dc-clickhouse.svg","description":"The fastest, most resource-efficient OLAP database for real-time analytics"},{"text":"Managed Service for Apache Kafka®","url":"/services/managed-kafka/","icon":"/assets/icons/dc-kafka.svg","description":"A leading data streaming technology for large-scale, data-intensive applications"},{"text":"Managed Service for Apache Airflow®","url":"/services/managed-airflow/","icon":"/assets/icons/dc-airflow.svg","description":"Open-source tool to orchestrate and monitor workflows"},{"text":"Data Transfer","url":"/services/doublecloud-transfer/","icon":"/assets/icons/dc-transfer.svg","description":"No-code ELT tool for aggregating, collecting, and migrating data"},{"text":"Data Visualization","url":"/services/doublecloud-visualization/","icon":"/assets/icons/dc-data-vis.svg","description":"Free tool to create, modify, and share dashboards and charts"}]}},{"text":"Solutions","type":"dc-dropdown","data":{"view":"list","groups":[{"title":"By use case","items":[{"text":"Customer-facing analytics","url":"/solutions/customer-facing-analytics/","description":"Provide business insights for your clients or partners"},{"text":"Real-time analytics","url":"/solutions/real-time-analytics/","description":"Build a data infrastructure to collect, process, and analyze data in real time"},{"text":"Observability and monitoring","url":"/solutions/observability-and-monitoring/","description":"Analyze terabytes of your logs, events, and traces with ease"}]},{"title":"By industry","items":[{"text":"AdTech and MarTech data analytics","url":"/solutions/adtech/","description":"Extract and analyze data from Meta ads, Google ads, LinkedIn ads, and others"},{"text":"Analytics for mobile and gaming apps","url":"/solutions/web-mobile-gaming-apps/","description":"Optimize and scale your mobile and gaming app analytics"},{"text":"EdTech data analytics","url":"/solutions/edtech/","description":"Improve online learning and identify new sales opportunities"},{"text":"FinTech data analytics","url":"/solutions/fintech-real-time-analytics/","description":"Manage and process large amounts of financial data efficiently"}]}]}},{"text":"Resources","type":"dc-dropdown","data":{"view":"list","groups":[{"title":"Using DoubleCloud","items":[{"text":"DoubleCloud API","url":"/docs/en/public-api/","description":"Read up on API tutorials and instructions","target":"_self"},{"text":"Terraform","url":"/docs/en/developer-resources/terraform/create-resources","description":"Deploy and manage cloud resources with the infrastructure-as-code approach"},{"text":"Status updates","url":"https://status.double.cloud/","description":"Check the current operational status of our services"},{"text":"Support","url":"/support/","description":"Learn more about our support tiers"}]},{"title":"Discover","items":[{"text":"Webinars","url":"/webinars/","description":"Sign up for the next webinar or watch previous ones"},{"text":"Blog","url":"/blog/","description":"Get insights from our team and the latest news"}]},{"image":{"src":"/assets/doublecloud/menu-bar/menu-banners-dc-ebook.png.webp","style":{"width":300,"height":300}},"text":"\u003ca href='/resources/clickhouse-ebook/' target='_self'\u003eGrab your ebook  →\u003c/a\u003e"}]}},{"text":"Company","type":"dc-dropdown","data":{"items":[{"text":"About DoubleCloud","url":"/company/about-us/"},{"text":"Careers","url":"/company/careers/"},{"text":"Contact us","url":"/company/contact-us/"}]}},{"text":"Pricing","url":"/pricing/"},{"text":"Documentation","url":"/docs/en/","target":"_self"}]},"logo":{"icon":"/assets/logo/dc-logo-dark.svg","text":""},"footer":{"underline":{"links":[{"text":"Customer Agreement","url":"/legal/en/customer_agreement/","target":"_blank"},{"text":"Privacy Policy","url":"/legal/en/privacy/","target":"_blank"},{"text":"Pricing","url":"/pricing/"},{"text":"Security","url":"/security/","target":"_blank"}],"copyright":"© 2024 DoubleCloud"},"columns":[{"title":"Products","links":[{"text":"Managed Service for ClickHouse®","url":"/services/managed-clickhouse/"},{"text":"Managed Service for Apache Kafka®","url":"/services/managed-kafka/"},{"text":"Managed Service for Apache Airflow®","url":"/services/managed-airflow"},{"text":"Data Transfer","url":"/services/doublecloud-transfer/"},{"text":"Data Visualization","url":"/services/doublecloud-visualization"}]},{"title":"Solutions","links":[{"text":"Case studies","url":"/resources/case-studies/"},{"text":"Customer-facing analytics","url":"/solutions/customer-facing-analytics/"},{"text":"Real-time analytics","url":"/solutions/real-time-analytics/"},{"text":"Observability and monitoring","url":"/solutions/observability-and-monitoring/"},{"text":"AdTech and MarTech data analytics","url":"/solutions/adtech/"},{"text":"Analytics for mobile and gaming Apps","url":"/solutions/web-mobile-gaming-apps/"},{"text":"EdTech data analytics","url":"/solutions/edtech/"},{"text":"FinTech data analytics","url":"/solutions/fintech-real-time-analytics/"}]},{"title":"Resources","links":[{"text":"Documentation","url":"/docs/en/"},{"text":"Webinars","url":"/webinars/"},{"text":"Blog","url":"/blog/"},{"text":"Support","url":"/support/"},{"text":"Status updates","url":"https://status.double.cloud/"},{"text":"Product comparisons","url":"/comparison/"},{"text":"Site map","url":"/sitemap/"}]},{"title":"Company","links":[{"text":"About DoubleCloud","url":"/company/about-us/"},{"text":"Careers","url":"/company/careers"},{"text":"AWS Partnership","url":"/aws-partnership/"}]}]},"forms":{"contact":"11819433.daba96b39df83b7903708cc4842e9dbb9c944cce"},"favicon":{"folder":"/assets/favicon"},"analytics":{"id":"GTM-5M39N8J","ignore":true,"popup":{"text":"\u003cp\u003eBy\u0026nbsp;clicking \u0026ldquo;Accept\u0026rdquo;, you agree to\u0026nbsp;the storing of\u0026nbsp;cookies on\u0026nbsp;your device to\u0026nbsp;help us\u0026nbsp;analyze site usage and assist in\u0026nbsp;our marketing efforts. However, you may \u0026ldquo;Decline\u0026rdquo; that. More details here in\u0026nbsp;\u003ca href=\"/legal/en/privacy/\"\u003ePrivacy Policy\u003c/a\u003e\u003c/p\u003e","buttons":{"accept":{"size":"xl","text":"Accept"},"decline":{"size":"xl","text":"Decline"}}}},"announcement":{"name":"webinar_announcement","url":"https://doublecloud-archive.github.io/blog/posts/2024/10/doublecloud-final-update/","conditions":{"date":{"start":"2000-01-01T00:00:00Z","end":"2099-12-31T00:00:00Z"}},"text":"\u003cp\u003e\u003cb\u003eDoubleCloud has wound down operations\u003c/b\u003e | This is\u0026nbsp;an\u0026nbsp;archived version of\u0026nbsp;the site. \u003cb\u003eLearn more \u0026rarr; \u003c/b\u003e\u003c/p\u003e"}},"meta":{"title":"Relevance of data types in the age of column-based compression | DoubleCloud","date":"2023-02-01T00:00:00Z","image":"/assets/blog/articles/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant-sharing.png","canonicalUrl":"","organization":{"appTitle":"DoubleCloud","legalName":"DoubleCloud Inc","supportEmail":"","url":"https://double.cloud"},"description":"Explore the impact of column-based compression on data types and how it can redefine their significance.","content":"\u003cp\u003eIn\u0026nbsp;this article, we\u0026rsquo;ll talk about:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#what-are-data-types?\"\u003eWhat are data types?\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#how-does-compression-help-with-storing-data?\"\u003eHow does compression help with storing data?\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#dont-explain-basics-to-me-i-want-to-see-real-data\"\u003eDon\u0026rsquo;t explain basics to\u0026nbsp;me\u0026nbsp;I\u0026nbsp;want to\u0026nbsp;see real data\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#test-setup\"\u003eTest setup\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#first-result\"\u003eFirst result\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#compression-algorithms-and-codecs\"\u003eCompression algorithms and codecs\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#the-t64-codec\"\u003eThe T64 codec\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#data-types-and-disk-space-consumption\"\u003eData types and disk space consumption\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#no-disk-consumption-difference-that-means-data-types-really-dont-matter-anymore\"\u003eNo\u0026nbsp;disk consumption difference that means data types really don\u0026rsquo;t matter anymore\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#speed-of-compression-algorithm\"\u003eSpeed of\u0026nbsp;compression algorithm\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#memory-usage\"\u003eMemory usage\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#query-speed\"\u003eQuery speed\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#conclusion\"\u003eConclusion\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI\u0026rsquo;ve been working with databases for over twenty years now and one of\u0026nbsp;the first things I\u0026nbsp;always do\u0026nbsp;when optimizing performance is\u0026nbsp;to\u0026nbsp;take a\u0026nbsp;look at\u0026nbsp;the used data types.\u003c/p\u003e\n\u003cp\u003eIt\u0026nbsp;may not sound like much if\u0026nbsp;a\u0026nbsp;single number takes up\u0026nbsp;1,2,4 or\u0026nbsp;8\u0026nbsp;bytes of\u0026nbsp;storage, but if\u0026nbsp;you want to\u0026nbsp;store billions of\u0026nbsp;numbers, a\u0026nbsp;factor of\u0026nbsp;8\u0026nbsp;will have a\u0026nbsp;big impact on\u0026nbsp;the final space you need\u0026hellip; and therefore have a\u0026nbsp;direct impact on\u0026nbsp;your database cost and also speed of\u0026nbsp;queries.\u003c/p\u003e\n\u003cp\u003eLately, I\u0026nbsp;had a\u0026nbsp;short discussion with a\u0026nbsp;potential customer.\u003c/p\u003e\n\u003cp\u003eThey were asking if\u0026nbsp;choosing the smallest data type is\u0026nbsp;still important when working with ClickHouse?\u003c/p\u003e\n\u003cp\u003eTheir reasoning behind this was that ClickHouse, as\u0026nbsp;well as\u0026nbsp;other column based DBMS, compress not rows, but single columns, and therefore the compression algorithm should be\u0026nbsp;able to\u0026nbsp;compress the numbers, no\u0026nbsp;matter if\u0026nbsp;we\u0026nbsp;were choosing the smallest possible type, or\u0026nbsp;just use 64-Bit integer all the time.\u003c/p\u003e\n\u003cp\u003eI\u0026nbsp;instantly said yes, as\u0026nbsp;even in\u0026nbsp;column based DBMS data is\u0026nbsp;not always compressed, but still\u0026hellip; it\u0026nbsp;stayed in\u0026nbsp;my\u0026nbsp;mind to\u0026nbsp;evaluate in\u0026nbsp;more detail, if\u0026nbsp;data types still matter in\u0026nbsp;a\u0026nbsp;column based context.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;give away the TL;DR: Yes, data types still matter, but not if\u0026nbsp;you\u0026rsquo;re only focusing on\u0026nbsp;disk usage.\u003c/p\u003e\n\u003ch2 id=\"what-are-data-types?\"\u003e\u003ca href=\"#what-are-data-types?\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eWhat are data types?\u003c/span\u003e\u003c/a\u003eWhat are data types?\u003c/h2\u003e\n\u003cp\u003eBefore we\u0026nbsp;are going into the details and benchmarking results, I\u0026nbsp;want to\u0026nbsp;give a\u0026nbsp;short recap about what data types are.\u003c/p\u003e\n\u003cp\u003eBasically data types describe the way to\u0026nbsp;represent data within a\u0026nbsp;DBMS (in\u0026nbsp;our case).\u003c/p\u003e\n\u003cp\u003eIf\u0026nbsp;you want to\u0026nbsp;store for example, the number 57, you have multiple possibilities to\u0026nbsp;store this number in\u0026nbsp;ClickHouse.\u003c/p\u003e\n\u003cp\u003eYou can use some unsigned integer type like UInt8 or\u0026nbsp;UInt64, other possibilities are signed integers like Int16 or\u0026nbsp;Int32.\u003c/p\u003e\n\u003cp\u003eMaybe not instantly in\u0026nbsp;your focus but also possible would be\u0026nbsp;the String type or\u0026nbsp;to\u0026nbsp;make use of\u0026nbsp;the decimal type.\u003c/p\u003e\n\u003cp\u003eThe main difference between all these types is, how big the numbers can grow and how much space a\u0026nbsp;single number takes up.\u003c/p\u003e\n\u003cp\u003eUInt8 for example means you can store unsigned integers with a\u0026nbsp;maximum of\u0026nbsp;2⁸ (256). Each number takes up\u0026nbsp;8\u0026nbsp;bits (hence the name UInt8) or\u0026nbsp;1\u0026nbsp;byte of\u0026nbsp;space.\u003c/p\u003e\n\u003cp\u003eInt32 on\u0026nbsp;the other hand allows you to\u0026nbsp;store signed numbers between -2\u0026sup3;\u0026sup1; and 2\u0026sup3;\u0026sup1;-1, but each number you store takes up\u0026nbsp;32\u0026nbsp;bits or\u0026nbsp;4\u0026nbsp;bytes of\u0026nbsp;space.\u003c/p\u003e\n\u003cp\u003eSo\u0026nbsp;if\u0026nbsp;you want to\u0026nbsp;store our example number 57, when storing that number into a\u0026nbsp;Int32 column you are actually storing the 57\u0026nbsp;in\u0026nbsp;one byte and a\u0026nbsp;lot of\u0026nbsp;additional zeros to\u0026nbsp;fill up\u0026nbsp;the other 3\u0026nbsp;bytes.\u003c/p\u003e\n\u003cp\u003eIf\u0026nbsp;you want to\u0026nbsp;store the number 57\u0026nbsp;in\u0026nbsp;a\u0026nbsp;string column, then the single digits would be\u0026nbsp;converted into their ASCII representation and the total length of\u0026nbsp;the string would be\u0026nbsp;added to\u0026nbsp;the storage, hence we\u0026nbsp;would store the information string of\u0026nbsp;length 2\u0026nbsp;and two bytes representing the digit 5\u0026nbsp;and the digit 7.\u003c/p\u003e\n\u003cp\u003eThis would make up\u0026nbsp;a\u0026nbsp;total of\u0026nbsp;at\u0026nbsp;least 3\u0026nbsp;bytes (assuming the length is\u0026nbsp;stored in\u0026nbsp;one byte) used for storing the number 57\u0026nbsp;in\u0026nbsp;a\u0026nbsp;String field.\u003c/p\u003e\n\u003cp\u003eSo\u0026nbsp;no\u0026nbsp;matter if\u0026nbsp;we\u0026nbsp;add additional zeros to\u0026nbsp;the data or\u0026nbsp;always adding the length of\u0026nbsp;the number to\u0026nbsp;it, when using bigger data types than needed, we\u0026nbsp;are adding redundant data.\u003cbr /\u003e\nThis is\u0026nbsp;where compression comes into play.\u003c/p\u003e\n\u003ch2 id=\"how-does-compression-help-with-storing-data?\"\u003e\u003ca href=\"#how-does-compression-help-with-storing-data?\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eHow does compression help with storing data?\u003c/span\u003e\u003c/a\u003eHow does compression help with storing data?\u003c/h2\u003e\n\u003cp\u003eAs\u0026nbsp;we\u0026rsquo;ve seen above, choosing the right data type can have a\u0026nbsp;big impact on\u0026nbsp;the amount of\u0026nbsp;data we\u0026nbsp;need to\u0026nbsp;store on\u0026nbsp;disk, even for a\u0026nbsp;single number.\u003c/p\u003e\n\u003cp\u003eBut what if\u0026nbsp;we\u0026nbsp;don\u0026rsquo;t want to\u0026nbsp;only store single numbers\u0026hellip; but thousands, or\u0026nbsp;millions or\u0026nbsp;even trillions of\u0026nbsp;numbers?\u003c/p\u003e\n\u003cp\u003eIf\u0026nbsp;we\u0026nbsp;want to\u0026nbsp;store them directly, the impact of\u0026nbsp;the data type is\u0026nbsp;exactly the same as\u0026nbsp;if\u0026nbsp;storing a\u0026nbsp;single number.\u003c/p\u003e\n\u003cp\u003eIf\u0026nbsp;one number takes up\u0026nbsp;3\u0026nbsp;bytes then one million numbers take up\u0026nbsp;3\u0026nbsp;million bytes, and if\u0026nbsp;a\u0026nbsp;single number takes up\u0026nbsp;only 1\u0026nbsp;byte then a\u0026nbsp;million number takes up\u0026nbsp;only 1\u0026nbsp;million bytes.\u003c/p\u003e\n\u003cp\u003eThat\u0026rsquo;s where compression kicks in.\u003c/p\u003e\n\u003cp\u003eI\u0026nbsp;won\u0026rsquo;t go\u0026nbsp;into details about how compression works, as\u0026nbsp;this could fill several books (which are already written as\u0026nbsp;well for some parts), but I\u0026nbsp;just want to\u0026nbsp;explain some generics.\u003c/p\u003e\n\u003cp\u003eCompression tries to\u0026nbsp;remove the amount of\u0026nbsp;redundancy of\u0026nbsp;data.\u003c/p\u003e\n\u003cp\u003eFor example if\u0026nbsp;you have a\u0026nbsp;list of\u0026nbsp;numbers: 5,5,5,5,5,5,5,5,8,8,8,9,1 you could write it\u0026nbsp;in\u0026nbsp;a\u0026nbsp;compressed way: 8\u003cem\u003e5,3\u003c/em\u003e8,9,1\u003c/p\u003e\n\u003cp\u003eAs\u0026nbsp;we\u0026nbsp;can see in\u0026nbsp;that simple example, the big amount of\u0026nbsp;fives could be\u0026nbsp;compressed quite well. The original list took 13\u0026nbsp;characters (without commas), the new one only 8.\u003c/p\u003e\n\u003cp\u003eBut what about different data types in\u0026nbsp;this regard?\u003c/p\u003e\n\u003cp\u003eWhen choosing a\u0026nbsp;non optimal data type, you\u0026rsquo;re basically adding additional space that a\u0026nbsp;single value would take up.\u003c/p\u003e\n\u003cp\u003eBut as\u0026nbsp;seen before, this space is\u0026nbsp;mostly filled with zeros, so\u0026nbsp;if\u0026nbsp;you have millions of\u0026nbsp;values, you\u0026rsquo;re actually adding multiple millions of\u0026nbsp;zeros to\u0026nbsp;your data, which means you are adding a\u0026nbsp;lot of\u0026nbsp;redundant data, and compression would remove redundancy.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;go\u0026nbsp;back to\u0026nbsp;our example, let\u0026rsquo;s say in\u0026nbsp;our list of\u0026nbsp;numbers each number takes up\u0026nbsp;3\u0026nbsp;bytes, then the list would look as\u0026nbsp;follows:\u003c/p\u003e\n\u003cp\u003e005,005,005,005,005,005,005,005,008,008,008,009,001 which would result in\u0026nbsp;39\u0026nbsp;characters to\u0026nbsp;store.\u003c/p\u003e\n\u003cp\u003eBut the compressed list would look like this: 8\u003cem\u003e005,3\u003c/em\u003e008,009,001 or\u0026nbsp;16\u0026nbsp;characters.\u003c/p\u003e\n\u003cp\u003eSo\u0026nbsp;even as\u0026nbsp;the raw data takes up\u0026nbsp;3\u0026nbsp;times more space as\u0026nbsp;we\u0026nbsp;are choosing a\u0026nbsp;different data type, the compressed data only takes up\u0026nbsp;2\u0026nbsp;times more.\u003c/p\u003e\n\u003ch2 id=\"dont-explain-basics-to-me-i-want-to-see-real-data\"\u003e\u003ca href=\"#dont-explain-basics-to-me-i-want-to-see-real-data\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eDon\u0026rsquo;t explain basics to\u0026nbsp;me\u0026nbsp;I\u0026nbsp;want to\u0026nbsp;see real data\u003c/span\u003e\u003c/a\u003eDon\u0026rsquo;t explain basics to\u0026nbsp;me\u0026nbsp;I\u0026nbsp;want to\u0026nbsp;see real data\u003c/h2\u003e\n\u003cp\u003eAs\u0026nbsp;described above, choosing bigger data types than needed mainly adds redundant data to\u0026nbsp;the uncompressed blocks, but when writing data to\u0026nbsp;disk, the redundancy should be\u0026nbsp;eliminated again thanks to\u0026nbsp;compression.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;test this, we\u0026nbsp;use a\u0026nbsp;simple test setup.\u003c/p\u003e\n\u003cp\u003eWe\u0026rsquo;ll store 100\u0026nbsp;million rows, containing values between 0\u0026nbsp;and 100\u0026nbsp;in\u0026nbsp;different data types.\u003c/p\u003e\n\u003cp\u003eThen I\u0026rsquo;ll look at\u0026nbsp;the amount of\u0026nbsp;space these take up\u0026nbsp;on\u0026nbsp;disk, and later on\u0026nbsp;we\u0026rsquo;ll do\u0026nbsp;some simple queries to\u0026nbsp;see if\u0026nbsp;different data types have an\u0026nbsp;impact on\u0026nbsp;performance.\u003c/p\u003e\n\u003ch2 id=\"test-setup\"\u003e\u003ca href=\"#test-setup\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eTest setup\u003c/span\u003e\u003c/a\u003eTest setup\u003c/h2\u003e\n\u003cp\u003eFirst we\u0026nbsp;define our test table choosing clickhouse default compression and a\u0026nbsp;lot of\u0026nbsp;different data types to\u0026nbsp;store the numbers 0\u0026nbsp;\u0026mdash; 100\u0026nbsp;in\u0026nbsp;it:\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eCREATE TABLE dtypes.data_default (\n  id UInt32,\n  u8 UInt8,\n  u16 UInt16,\n  u32 UInt32,\n  u64 UInt64,\n  u256 UInt256,\n  udec3 Decimal(3,0),\n  udec30 Decimal(30,0),\n  ulstr LowCardinality(String),\n  ustr String,\n\n  i8 Int8,\n  i16 Int16,\n  i32 Int32,\n  i64 Int64,\n  i256 Int256,\n\n  idec3 Decimal(3,0),\n  idec30 Decimal(30,0),\n  ilstr LowCardinality(String),\n  istr String\n) engine=MergeTree\norder by id;\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"132\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-132\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-132\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-132.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003cp\u003eTo\u0026nbsp;check if\u0026nbsp;there is\u0026nbsp;a\u0026nbsp;difference when storing signed values, I\u0026nbsp;also added the same columns again but prefixed with an\u0026nbsp;i.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;get the signed values but keep the data distribution, we\u0026rsquo;ll subtract 50\u0026nbsp;from the unsigned value, resulting in\u0026nbsp;values from -50 to\u0026nbsp;50.\u003c/p\u003e\n\u003cp\u003eNow we\u0026rsquo;ll fill the table with 100\u0026nbsp;million rows, generating random numbers between 0\u0026nbsp;and 100. We\u0026nbsp;explicitly want to\u0026nbsp;store random values, to\u0026nbsp;make sure our dataset itself compresses quite badly, as\u0026nbsp;we\u0026nbsp;only want to\u0026nbsp;see if\u0026nbsp;the redundancy of\u0026nbsp;the data type will be\u0026nbsp;compressed.\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eINSERT INTO dtypes.data_default\nSELECT number, rand() % 100 AS u, u, u, u, u, u, u, \n  toString(u), toString(u), \n  rand() % 100 - 50 AS i, i, i, i, i, \n  i, i, toString(i), toString(i)\nFROM numbers(100000000);\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"142\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-142\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-142\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-142.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003cp\u003eI\u0026nbsp;manually ran an\u0026nbsp;OPTIMIZE TABLE data_default FINAL to\u0026nbsp;make sure the data is\u0026nbsp;in\u0026nbsp;as\u0026nbsp;less parts possible, to\u0026nbsp;see the strongest effect of\u0026nbsp;the compression\u003c/p\u003e\n\u003ch2 id=\"first-result\"\u003e\u003ca href=\"#first-result\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eFirst result\u003c/span\u003e\u003c/a\u003eFirst result\u003c/h2\u003e\n\u003cp\u003eSo\u0026nbsp;how much space does each data type now take up\u0026nbsp;on\u0026nbsp;disk?\u003c/p\u003e\n\u003cp\u003eFortunately, ClickHouse collects a\u0026nbsp;lot of\u0026nbsp;statistics in\u0026nbsp;its system tables, so\u0026nbsp;we\u0026nbsp;can easily get the wanted data by\u0026nbsp;running a\u0026nbsp;simple query:\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eSELECT name, substring(type, 1, 50) as type, \n  formatReadableSize(data_compressed_bytes) AS comp,\n  formatReadableSize(data_uncompressed_bytes) AS uncomp,\n  round(data_uncompressed_bytes / data_compressed_bytes, 2) AS \n    ratio\nFROM system.columns\nWHERE database ='dtypes' AND table = 'data_default'\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"155\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-155\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-155\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-155.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003cp\u003eAnd this is\u0026nbsp;the result:\u003c/p\u003e\n\u003ctable\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003ename\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003etype\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003ecomp\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003euncomp\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e\u003cstrong\u003eratio\u003c/strong\u003e\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eid\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e383.12 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.78 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.37 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu16\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt16\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e146.84 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e190.73 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.3\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e279.67 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.36\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu64\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt64\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e285.15 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e762.94 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e2.68\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eu256\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eUInt256\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e380.01 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e2.98 GiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e8.03\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eudec3\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eDecimal (3, 0)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e279.67 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.36\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eudec30\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eDecimal (30, 0)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e286.53 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.49 GiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5.33\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eulstr\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eLowCardinality (String)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.89 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.56 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eustr\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eString\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e182.86 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e276.57 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.51\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.78 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.37 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei16\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt16\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e155.06 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e190.73 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.23\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt32\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e281.05 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.36\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei64\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt64\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e284.83 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e762.94 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e2.68\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003ei256\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eInt256\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e379.24 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e2.98 GiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e8.05\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eidec3\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eDecimal (3, 0)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e281.05 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e381.47 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.36\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eidec30\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eDecimal (30, 0)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e285.77 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.49 GiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5.34\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eilstr\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eLowCardinality (String)\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.89 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e95.56 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003eistr\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003eString\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e189.39 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e315.67 MiB\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1.67\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eAs\u0026nbsp;you can see, the results resemble the basic assumption we\u0026nbsp;had, that the bigger the data type is, the better the compression ratio becomes, or\u0026nbsp;simply speaking, if\u0026nbsp;a\u0026nbsp;bigger data type in\u0026nbsp;theory takes up\u0026nbsp;double the space than a\u0026nbsp;smaller data type, it\u0026nbsp;doesn\u0026rsquo;t mean that after compression the data still takes up\u0026nbsp;double the space on\u0026nbsp;disk.\u003c/p\u003e\n\u003cp\u003eBut we\u0026nbsp;also see that choosing the smallest data type possible (UInt8) takes up\u0026nbsp;95MiB while the biggest one (UInt256) takes 380MiB, so\u0026nbsp;still a\u0026nbsp;factor of\u0026nbsp;4\u0026nbsp;for disk usage, which does still matter a\u0026nbsp;lot.\u003c/p\u003e\n\u003ch2 id=\"compression-algorithms-and-codecs\"\u003e\u003ca href=\"#compression-algorithms-and-codecs\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eCompression algorithms and codecs\u003c/span\u003e\u003c/a\u003eCompression algorithms and codecs\u003c/h2\u003e\n\u003cp\u003eAs\u0026nbsp;disk I/O is\u0026nbsp;the most important factor for speed in\u0026nbsp;ClickHouse and disk space being an\u0026nbsp;important factor for cost as\u0026nbsp;well, we\u0026nbsp;could already finish here and conclude that data types still matter and all would be\u0026nbsp;fine.\u003c/p\u003e\n\u003cp\u003eBut ClickHouse has such a\u0026nbsp;wide variety of\u0026nbsp;possibilities for defining columns, using special compression algorithms and codecs for optimizing the compression ratio.\u003c/p\u003e\n\u003cp\u003eThe default algorithm used is\u0026nbsp;LZ4, which is\u0026nbsp;fast and has a\u0026nbsp;good compression ratio overall. But using zstd can lead to\u0026nbsp;a\u0026nbsp;better compression with only a\u0026nbsp;little more impact on\u0026nbsp;the CPU.\u003c/p\u003e\n\u003cp\u003eThere are also some special codecs which can be\u0026nbsp;applied to\u0026nbsp;make data more compressible like T64.\u003c/p\u003e\n\u003cp\u003eTo\u0026nbsp;change a\u0026nbsp;codec in\u0026nbsp;ClickHouse you just need to\u0026nbsp;change the definition of\u0026nbsp;the column you want to\u0026nbsp;apply a\u0026nbsp;different codec on:\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eCREATE TABLE dtypes.data_t64_zstd (\nid UInt32,\nu8 UInt8  CODEC(T64, ZSTD),\nu16 UInt16  CODEC(T64, ZSTD),\n…\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"727\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-727\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-727\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-727.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003ch2 id=\"the-t64-codec\"\u003e\u003ca href=\"#the-t64-codec\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eThe T64 codec\u003c/span\u003e\u003c/a\u003eThe T64 codec\u003c/h2\u003e\n\u003cp\u003eI\u0026nbsp;want to\u0026nbsp;give a\u0026nbsp;short description of\u0026nbsp;the T64 codec, as\u0026nbsp;it\u0026nbsp;can have a\u0026nbsp;strong impact on\u0026nbsp;the compression ratio in\u0026nbsp;the case of\u0026nbsp;using bigger datatypes than needed.\u003c/p\u003e\n\u003cp\u003eThe way it\u0026nbsp;works is\u0026nbsp;that it\u0026nbsp;uses 64\u0026nbsp;values and writes them in\u0026nbsp;a\u0026nbsp;matrix, then it\u0026nbsp;transposes this matrix and the compression algorithm gets the transposed matrix to\u0026nbsp;compress it.\u003c/p\u003e\n\u003cp\u003eFor better understanding i\u0026nbsp;will demonstrate the logic on\u0026nbsp;5\u0026nbsp;values between 0\u0026nbsp;and 100\u0026nbsp;and a\u0026nbsp;data type length of\u0026nbsp;5:\u003c/p\u003e\n\u003ctable\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e4\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e9\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e7\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e8\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eLooking at\u0026nbsp;the number it\u0026nbsp;is\u0026nbsp;hard to\u0026nbsp;compress them, but when applying a\u0026nbsp;T64 transformation before, it\u0026nbsp;gets a\u0026nbsp;lot easier to\u0026nbsp;compress:\u003c/p\u003e\n\u003ctable\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e0\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e9\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e5\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e8\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\n\u003cp\u003e5\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e4\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e7\u003c/p\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n\u003cp\u003e1\u003c/p\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eSo\u0026nbsp;leading zeros in\u0026nbsp;value representation will become zero values, ergo resulting in\u0026nbsp;better compression ratios. Unfortunately T64 cannot be\u0026nbsp;applied to\u0026nbsp;all data types.\u003c/p\u003e\n\u003ch2 id=\"data-types-and-disk-space-consumption\"\u003e\u003ca href=\"#data-types-and-disk-space-consumption\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eData types and disk space consumption\u003c/span\u003e\u003c/a\u003eData types and disk space consumption\u003c/h2\u003e\n\u003cp\u003eSo\u0026nbsp;finally, let\u0026rsquo;s see how much really gets stored on\u0026nbsp;the disk, depending on\u0026nbsp;different data types, codes and compression algorithms:\u003c/p\u003e\n\n\u003cp\u003eWe\u0026nbsp;can see quite the interesting results.\u003c/p\u003e\n\u003cp\u003eWhen using the default compression algorithm, the amount of\u0026nbsp;disk space (and therefore cost and I/O performance) varies quite a\u0026nbsp;lot, going from 96MiB for UInt8 up\u0026nbsp;to\u0026nbsp;380MiB for UInt256.\u003c/p\u003e\n\u003cp\u003eUsing zstd on\u0026nbsp;the other hand leads to\u0026nbsp;a\u0026nbsp;lot smaller variance in\u0026nbsp;sizes, minimum still being around 80MiB for UInt8 but the maximum is\u0026nbsp;only 118MiB for UInt32 (or\u0026nbsp;Decimal3), and even storing the values as\u0026nbsp;string only results in\u0026nbsp;111MiB for unsigned or\u0026nbsp;119MiB for the signed ones.\u003c/p\u003e\n\u003cp\u003eWhen looking at\u0026nbsp;the results from the T64 transformation, the effect is\u0026nbsp;exactly as\u0026nbsp;wished and the variance there goes from a\u0026nbsp;minimum of\u0026nbsp;83.8MiB to\u0026nbsp;a\u0026nbsp;maximum of\u0026nbsp;85.5MiB with nearly no\u0026nbsp;difference between lz4 and zstd.\u003c/p\u003e\n\u003ch3 id=\"no-disk-consumption-difference-that-means-data-types-really-dont-matter-anymore?\"\u003e\u003ca href=\"#no-disk-consumption-difference-that-means-data-types-really-dont-matter-anymore?\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eNo\u0026nbsp;disk consumption difference\u0026hellip; That means data types really don\u0026rsquo;t matter anymore?\u003c/span\u003e\u003c/a\u003eNo\u0026nbsp;disk consumption difference\u0026hellip; That means data types really don\u0026rsquo;t matter anymore?\u003c/h3\u003e\n\u003cp\u003eWhoah! Not so\u0026nbsp;fast with your conclusions there!\u003c/p\u003e\n\u003cp\u003eEven with the results we\u0026nbsp;saw regarding disk space usage, we\u0026rsquo;re not at\u0026nbsp;the end yet.\u003c/p\u003e\n\u003cp\u003eOf\u0026nbsp;course I/O performance is\u0026nbsp;the main bottleneck most of\u0026nbsp;the time, when speaking about general performance of\u0026nbsp;ClickHouse (or\u0026nbsp;other DBMS), but there are more things to\u0026nbsp;consider:\u003c/p\u003e\n\u003ch2 id=\"speed-of-compression-algorithm\"\u003e\u003ca href=\"#speed-of-compression-algorithm\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eSpeed of\u0026nbsp;compression algorithm\u003c/span\u003e\u003c/a\u003eSpeed of\u0026nbsp;compression algorithm\u003c/h2\u003e\n\u003cp\u003eIf\u0026nbsp;all the algorithms were equally fast, there would only be\u0026nbsp;one algorithm to\u0026nbsp;use, right?\u003c/p\u003e\n\u003cp\u003eBut in\u0026nbsp;real world scenarios, the compression algorithm can make a\u0026nbsp;big difference in\u0026nbsp;speed. Especially when inserting new data\u0026hellip; this could have a\u0026nbsp;big impact on\u0026nbsp;how much inserts your application can handle with a\u0026nbsp;given infrastructure.\u003c/p\u003e\n\u003ch2 id=\"memory-usage\"\u003e\u003ca href=\"#memory-usage\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eMemory usage\u003c/span\u003e\u003c/a\u003eMemory usage\u003c/h2\u003e\n\u003cp\u003eEven if\u0026nbsp;different data types take up\u0026nbsp;an\u0026nbsp;equal amount of\u0026nbsp;space on\u0026nbsp;your disks because of\u0026nbsp;compression, when using the data within queries you\u0026rsquo;re not working with compressed data anymore, but ClickHouse has decompressed the data to\u0026nbsp;throw it\u0026nbsp;into the actual calculation logic.\u003c/p\u003e\n\u003cp\u003eWe\u0026nbsp;can already see this in\u0026nbsp;a\u0026nbsp;very simple example.\u003c/p\u003e\n\u003cp\u003eLet\u0026rsquo;s say we\u0026nbsp;need to\u0026nbsp;group by\u0026nbsp;our values within different data types, and want to\u0026nbsp;get the average value of\u0026nbsp;the id\u0026nbsp;column:\u003c/p\u003e\n\n    \u003cdiv class=\"yfm-clipboard\"\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs\"\u003eSELECT u8 AS grp, avg(id) \nFROM dtypes.data_default \nGROUP BY grp \nORDER BY grp\n\u003c/code\u003e\u003c/pre\u003e\n\n    \u003csvg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" class=\"yfm-clipboard-button\" data-animation=\"45\"\u003e\n        \u003cpath fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"\u003e\u003c/path\u003e\n        \u003cpath stroke=\"currentColor\" fill=\"transparent\" stroke-width=\"1.5\" d=\"M9.5 13l3 3l5 -5\" visibility=\"hidden\"\u003e\n            \u003canimate id=\"visibileAnimation-45\" attributeName=\"visibility\" from=\"hidden\" to=\"visible\" dur=\"0.2s\" fill=\"freeze\" begin\u003e\u003c/animate\u003e\n            \u003canimate id=\"hideAnimation-45\" attributeName=\"visibility\" from=\"visible\" to=\"hidden\" dur=\"1s\" begin=\"visibileAnimation-45.end+1\" fill=\"freeze\"\u003e\u003c/animate\u003e\n        \u003c/path\u003e\n    \u003c/svg\u003e\n    \u003c/div\u003e\n\u003cp\u003eGrouping as\u0026nbsp;well as\u0026nbsp;sorting has to\u0026nbsp;be\u0026nbsp;done on\u0026nbsp;uncompressed data of\u0026nbsp;course, that means the memory usage of\u0026nbsp;this simple query differs quite a\u0026nbsp;lot, depending on\u0026nbsp;the data type.\u003c/p\u003e\n\u003cp\u003e(For simplicity, I\u0026rsquo;ll omit the signed results from now on, as\u0026nbsp;the results are quite redundant to\u0026nbsp;the unsigned).\u003c/p\u003e\n\n\u003cp\u003eSo\u0026nbsp;the data type has a\u0026nbsp;direct impact on\u0026nbsp;the memory usage of\u0026nbsp;queries, which can make a\u0026nbsp;big difference on\u0026nbsp;how many queries you can run in\u0026nbsp;parallel or\u0026nbsp;even if\u0026nbsp;you can get a\u0026nbsp;query to\u0026nbsp;finish in\u0026nbsp;the first place.\u003c/p\u003e\n\u003ch2 id=\"query-speed\"\u003e\u003ca href=\"#query-speed\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eQuery speed\u003c/span\u003e\u003c/a\u003eQuery speed\u003c/h2\u003e\n\u003cp\u003eWhen working with large amounts of\u0026nbsp;data, query speed is\u0026nbsp;mostly bound on\u0026nbsp;I/O performance. But when data is\u0026nbsp;already in\u0026nbsp;memory because of\u0026nbsp;caching for example, the I/O impact isn\u0026rsquo;t as\u0026nbsp;important anymore.\u003c/p\u003e\n\u003cp\u003eInstead other things can take over.\u003c/p\u003e\n\u003cp\u003eIt\u0026nbsp;could make a\u0026nbsp;difference how fast you can copy data within your memory itself, or\u0026nbsp;it\u0026nbsp;could make a\u0026nbsp;difference if\u0026nbsp;some hardware acceleration can be\u0026nbsp;used.\u003c/p\u003e\n\u003cp\u003eMost cores have no\u0026nbsp;problem handling 32\u0026nbsp;bit integer values, but handling 256\u0026nbsp;bit integers might need some special logic within your code. Some very fast sorting algorithms might just work for small data types while others work best only for integer types etc.\u003c/p\u003e\n\u003cp\u003eAnd of\u0026nbsp;course, the decompression and transformation of\u0026nbsp;the data also takes some time.\u003c/p\u003e\n\u003cp\u003eI\u0026nbsp;ran the query from the last section via clickhouse-benchmark on\u0026nbsp;to\u0026nbsp;measure the speed regarding different types and algorithms:\u003c/p\u003e\n\n\u003cp\u003eThe absolute numbers are not that relevant here, only the relation between the types is\u0026nbsp;interesting. As\u0026nbsp;we\u0026nbsp;can see, regarding query speed, data types can have a\u0026nbsp;big impact on\u0026nbsp;query performance.\u003c/p\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca href=\"#conclusion\" class=\"yfm-anchor\" aria-hidden=\"true\"\u003e\u003cspan class=\"visually-hidden\"\u003eConclusion\u003c/span\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eSo\u0026nbsp;overall our tests and benchmarks confirmed what my\u0026nbsp;gut already thought directly.\u003c/p\u003e\n\u003cp\u003eEven with such a\u0026nbsp;good compression as\u0026nbsp;columns based DBMS (and especially ClickHouse) provide, data types do\u0026nbsp;still matter quite a\u0026nbsp;lot.\u003c/p\u003e\n\u003cp\u003eIt\u0026rsquo;s always worth it\u0026nbsp;to\u0026nbsp;check your data and choose the smallest data type needed, to\u0026nbsp;handle all your data.\u003c/p\u003e\n\u003cp\u003eBut regarding disk space alone, the case might be\u0026nbsp;different.\u003c/p\u003e\n\u003cp\u003eEspecially if\u0026nbsp;you want to\u0026nbsp;store a\u0026nbsp;lot of\u0026nbsp;uncleaned or\u0026nbsp;raw data, you might simply just use Strings for that and use ZSTD as\u0026nbsp;compression.\u003c/p\u003e\n\u003cp\u003eThat way, you have the possibility to\u0026nbsp;see when someone accidentally sends incorrect values as\u0026nbsp;well (like user input instead of\u0026nbsp;numbers).\u003c/p\u003e\n\u003cp\u003eBut once you really want to\u0026nbsp;work with your data in\u0026nbsp;the fastest possible way, you should always invest the time to\u0026nbsp;choose the right types.\u003c/p\u003e\n\u003cp\u003eYour future self will be\u0026nbsp;grateful 🙂.\u003c/p\u003e\n","sharing":{"title":"Do data types still matter? How column based compression can make data types irrelevant","description":"\u003cp\u003eWritten By: Stefan Kaeser, DoubleCloud Solution Architect\u003c/p\u003e","image":"/assets/blog/articles/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant-sharing.png","shareGenImage":"","shareGenTitle":"Do data types still matter? How column based compression can make data types irrelevant"},"keywords":[],"noIndex":false,"authors":[],"tags":[{"icon":null,"slug":"insights","name":"Insights","createdAt":"","updatedAt":"","count":0}],"metaSchema":{"@context":"https://schema.org","@graph":[{"@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"insights","name":"Insights"}}]},{"@type":"BlogPosting","@id":"https://double.cloud/blog/posts/2023/02/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant/","url":"https://double.cloud/blog/posts/2023/02/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant/","name":"Do data types still matter? How column based compression can make data types irrelevant","headline":"Do data types still matter? How column based compression can make data types irrelevant","abstract":"\u003cp\u003eWritten By: Stefan Kaeser, DoubleCloud Solution Architect\u003c/p\u003e","description":"\u003cp\u003eWritten By: Stefan Kaeser, DoubleCloud Solution Architect\u003c/p\u003e","dateCreated":"2023-02-01T00:00:00Z","datePublished":"2023-02-01T00:00:00Z","dateModified":"2023-02-01T00:00:00Z","author":{"@type":"Organization","name":"DoubleCloud","legalName":"DoubleCloud Inc","url":"https://double.cloud/","logo":{"@type":"ImageObject","url":"","width":32,"height":32}},"creator":{"@type":"Organization","name":"DoubleCloud","legalName":"DoubleCloud Inc","url":"https://double.cloud/","logo":{"@type":"ImageObject","url":"","width":32,"height":32}},"publisher":{"@type":"Organization","name":"DoubleCloud","legalName":"DoubleCloud Inc","url":"https://double.cloud/","logo":{"@type":"ImageObject","url":"","width":32,"height":32}},"copyrightHolder":{"@type":"Organization","name":"DoubleCloud","legalName":"DoubleCloud Inc","url":"https://double.cloud/","logo":{"@type":"ImageObject","url":"","width":32,"height":32}},"copyrightYear":2025,"mainEntityOfPage":{"@type":"WebPage","@id":"https://double.cloud/blog/posts/2023/02/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant/"},"inLanguage":{"@type":"Language","name":"English","alternateName":"en"},"keywords":["Insights"],"image":"https://double.cloud/assets/blog/articles/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant-small-cover.png","sharedContent":{"@type":"WebPage","headline":"Do data types still matter? How column based compression can make data types irrelevant","url":"https://double.cloud/blog/posts/2023/02/do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant/","author":{"@type":"Organization","name":"DoubleCloud","legalName":"DoubleCloud Inc","url":"https://double.cloud/","logo":{"@type":"ImageObject","url":"","width":32,"height":32}}},"wordCount":"","articleBody":""}]}},"routingData":{"hostname":"double.cloud"},"deviceData":{"isRobot":true,"isMobile":false,"isTablet":false},"csrfToken":"1VQ3PCKp-2lS7GSsunCdoS0uZvdWqg1eo7ss","clientConfig":{"appTitle":"DoubleCloud","legalName":"DoubleCloud Inc","supportEmail":"","hosts":{"site":"https://double.cloud","console":"https://app.double.cloud"}},"ignoreConsent":false,"noNextImg":false,"noSnippet":null},"__N_SSP":true},"page":"/blog/posts/[...slug]","query":{"slug":["2023","02","do-datatypes-still-matter-how-column-based-compression-can-make-data-types-irrelevant"]},"buildId":"HkxA3M0ES7gp3V0n_0ecw","isFallback":false,"gssp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>